(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{24781:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return k}));var a,s=n(2),o=n.n(s),i=n(2353),r=n(2825),c=n.n(r),l=n(9),d=n(2754),m=n(7326),u=n(10979),p=n(9081),g=n(6735),E=n.n(g),y=n(8759),h=n(6740),_=n(6745),S=n(24782),I=n(6731),b=n.n(I),T=n(6741),N=n(6742),f=n(24783);function v(e){const[t,n]=Object(s.useState)(!1),{online:a,permission:i}=b.a.canExecuteAction(T.WebSocketRequestUIAction.SAVE,{checkOnlineStatus:!0,checkPermission:!0,verbose:!0,showAlert:!1}),r=t=>{n(t),e.onDescriptionEditToggle(t)},l=t=>{b.a.update({id:e.requestId,extensions:{documentation:{content:t}}}).then((()=>r(!1))).catch((e=>{pm.logger.error("WebSocketRequestDocumentationView~onSaveDescription",e),pm.toasts.error("Something went wrong while saving the request description.")}))},m=()=>r(!1);return o.a.createElement(d.default,{keyMap:pm.shortcuts.getShortcuts(),handlers:{submit:l,quit:m}},o.a.createElement("div",{className:c()({"websocket-request-description":!0,"websocket-request-description--edit":t})},t&&a?o.a.createElement(p.DescriptionEditor,{entityType:"request",description:e.description,onCancel:m,onSave:l,placeholder:"Make things easier for your teammates with a complete request description."}):o.a.createElement("div",null,o.a.createElement(p.DescriptionPreview,{entityType:"request",description:e.description,onEditButtonClick:()=>r(!0),editable:a,canEdit:i,showEmptyPlaceholder:!0,tooltip:a?i?null:y.DISABLED_TOOLTIP_NO_PERMISSION:y.DISABLED_TOOLTIP_IS_OFFLINE}))))}let k=Object(i.observer)(a=class extends o.a.Component{constructor(e){super(e),this.state={descriptionEditMode:!1},this.onDescriptionEditToggle=this.onDescriptionEditToggle.bind(this)}onDescriptionEditToggle(e){this.setState({descriptionEditMode:e})}getSettings(t){let n,a=[];switch(t.type){case h.ItemType.WS_RAW_REQUEST:n=N.WS_CONNECTION_CONFIG;break;case h.ItemType.WS_SOCKETIO_REQUEST:n=_.SOCKETIO_CONNECTION_CONFIG,a=["version","path"]}return n?e.reduce(n,((n,s)=>{const o=s.id;let i=e.get(t,["payload","settings",o]);if(e.isNil(i)){if(e.isNil(s.defaultValue)||!e.includes(a,o))return n;i=s.defaultValue}return"dropdown"===s.inputFieldType&&s.menuLabels&&(i=s.menuLabels[e.findIndex(s.menuOptions,(e=>e===i))]||i),n.push({key:s.title,value:String(i),description:s.summary}),n}),[]):[]}renderMessages(e){switch(e.type){case h.ItemType.WS_RAW_REQUEST:return o.a.createElement(f.default,{requestId:e.id});case h.ItemType.WS_SOCKETIO_REQUEST:return o.a.createElement(S.default,{requestId:e.id});default:return null}}render(){const t=E.a.cacheAPI.get(this.props.contextData.requestId),n=e.get(t,"payload.url");return t?o.a.createElement(o.a.Fragment,null,o.a.createElement(m.ContextBarViewHeader,{title:"Documentation",onClose:this.props.onClose}),o.a.createElement(u.default,null,(({rootRef:a})=>o.a.createElement("div",{ref:a,className:"websocket-request-documentation"},o.a.createElement("div",{className:"websocket-request-documentation__body"},o.a.createElement(v,{requestId:t.id,description:e.get(t,"extensions.documentation.content"),onDescriptionEditToggle:this.onDescriptionEditToggle}),!this.state.descriptionEditMode&&o.a.createElement(o.a.Fragment,null,n&&o.a.createElement("div",{className:"websocket-request-documentation__body__url"},o.a.createElement(l.Heading,{type:"h3",text:"URL"}),o.a.createElement("div",{className:"request-documentation--url"},o.a.createElement(p.URLComponent,{request:{url:n}}))),o.a.createElement(p.KeyValueDescriptionTable,{title:"Query params",items:e.get(t,"payload.queryParams"),hideEmptyBody:!0}),o.a.createElement(p.KeyValueDescriptionTable,{title:"Headers",items:e.get(t,"payload.headers"),hideEmptyBody:!0}),o.a.createElement(p.KeyValueDescriptionTable,{title:"Settings",items:this.getSettings(t),hideEmptyBody:!0}),this.renderMessages(t))))))):null}})||a}.call(this,n(2753))},24782:function(e,t,n){"use strict";n.r(t),function(e){var a=n(2),s=n.n(a),o=n(2825),i=n.n(o),r=n(2353),c=n(9),l=n(9081),d=n(6735),m=n.n(d),u=n(6740),p=n(6742),g=n(10256),E=n(6744);function y(e){const[t,n]=Object(a.useState)(0),{message:o}=e;if(!o||!o.payload)return null;const{args:r}=o.payload;return s.a.createElement("div",{className:"socketio-messages-documentation__event__snippet",key:o.id},s.a.createElement(c.Heading,{type:"h6",text:o.title,hasBottomSpacing:!0,color:"content-color-secondary",isTruncated:!0}),s.a.createElement(g.default,{args:r,activeArg:t,onActiveArgChange:e=>n(e),className:"socketio-messages-documentation__event__snippet__multi-arg",readOnly:!0,renderMessageContent:e=>{const{type:t,subtype:n,content:a}=r[e],c=t===E.WebSocketMessageBodyType.BINARY?n:t;return s.a.createElement(l.EnhancedCode,{name:o.title,body:a,language:c,selectedLanguage:p.USER_FRIENDLY_LANGUAGE_NAME[c],highlightSyntaxByDefault:!0,className:i()({"socketio-messages-documentation__event__snippet__code":!0,"highlighted-code--documentation":!0})})}}))}const h=Object(r.observer)((t=>{const n=m.a.cacheAPI.get(t.requestId),a=e.get(n,"payload.events"),o=e.filter(n.childrenItems,(e=>e.type===u.ItemType.WS_SOCKETIO_MESSAGE));if(e.isEmpty(o)&&e.isEmpty(a))return null;let i=e.reduce(a,((e,t)=>(t&&t.name&&(e[t.name]={description:t.description,messages:[]}),e)),{});const r=[];return i=e.reduce(o,((e,t)=>{if(!t||!t.payload)return e;const{eventName:n="message"}=t.payload;return"message"!==n||e[n]?(!e[n]&&(e[n]={messages:[]}),e[n].messages.push(t),e):(r.push(t),e)}),i),r.length&&(i.message={messages:r}),s.a.createElement("div",{className:"socketio-messages-documentation"},s.a.createElement(c.Heading,{type:"h3",text:"Events",color:"content-color-primary"}),e.map(i,(({description:t,messages:n},a)=>s.a.createElement("div",{className:"socketio-messages-documentation__event",key:a},s.a.createElement(c.Heading,{type:"h4",text:a,color:"content-color-primary",isTruncated:!0}),t&&s.a.createElement(c.Text,{type:"body-medium",color:"content-color-primary"},t),!e.isEmpty(n)&&e.map(n,(e=>s.a.createElement(y,{key:e.id,message:e})))))))}));t.default=h}.call(this,n(2753))},24783:function(e,t,n){"use strict";n.r(t),function(e){var a=n(2),s=n.n(a),o=n(2353),i=n(9),r=n(9081),c=n(6735),l=n.n(c),d=n(6740),m=n(6742),u=n(6744);const p=Object(o.observer)((t=>{const n=e.filter(e.get(l.a.cacheAPI.get(t.requestId),"childrenItems"),(e=>e.type===d.ItemType.WS_RAW_MESSAGE));return e.isEmpty(n)?null:s.a.createElement("div",{className:"raw-websocket-messages-documentation"},s.a.createElement(i.Heading,{type:"h3",text:"Messages",color:"content-color-primary"}),e.map(n,(e=>{if(!e||!e.payload)return null;const{type:t,subtype:n,content:a}=e.payload,o=t===u.WebSocketMessageBodyType.BINARY?n:t;return s.a.createElement("div",{className:"raw-websocket-messages-documentation__item",key:e.id},s.a.createElement(i.Heading,{type:"h6",text:e.title,hasBottomSpacing:!0,color:"content-color-primary",isTruncated:!0}),s.a.createElement(r.EnhancedCode,{name:e.title,body:a,language:o,selectedLanguage:m.USER_FRIENDLY_LANGUAGE_NAME[o],highlightSyntaxByDefault:!0,className:"highlighted-code--documentation",enableClickToExpand:!0}))})))}));t.default=p}.call(this,n(2753))}}]);