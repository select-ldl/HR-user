(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{14510:function(e,t,r){"use strict";r.r(t),function(e){var o=r(14511),n=r(14512),i=r(4596),a=r(14513),l=r(14514),s=r(4939),c=r(14515),u=r(4931),d=r(1509),p=r.n(d),f=r(3838);function m(e,t){e?e.isUserFriendly?pm.toasts.error(e.message,{dedupeId:"failed-collection-import"}):pm.toasts.error("导入失败, 集合 "+t.name,{dedupeId:"failed-collection-import"}):pm.toasts.success("集合 "+t.name+" 已导入")}t.default={checkImportEnvironmentFromUrl:o.default,importCollectionAndEnvironment:n.default,importData:async function(t,r,o){if(e.isEmpty(t))return e.isFunction(o)&&o();p.a.series([e=>{u.default.importCollections(t.collections,r,m,(t=>{e(null,t)}))},o=>{u.default.importGlobals(t.globals,e.pick(r,["activeWorkspace","silentToasts"]),(e=>{o(null,e)}))},o=>{u.default.importHeaderPresets(t.headerPresets,e.pick(r,["currentUserID","activeWorkspace","silentToasts"]),(e=>{o(null,e)}))},o=>{u.default.importEnvironments(t.environments,e.pick(r,["currentUserID","silentToasts","activeWorkspace"]),(e=>{o(null,e)}))},e=>{u.default.importRequests(t.requests,(t=>{e(null,t)}))},e=>{u.default.importCollectionRuns(t.runsInfo,t.events,r,f.handleCollectionRunImportStatus,(t=>{e(null,t)}))}],((t,r)=>{let n={};e.forEach(e.compact(r),(t=>{n[t.type]=e.pick(t,["total","imported","failed"])})),e.isFunction(o)&&o(n)}))},convertRawData:i.default,importDataAs:i.importDataAs,stringify:i.stringify,importFileFromUrl:a.default,parseUrlData:a.parseUrlData,importFiles:l.default,importFolder:s.default,saveEntity:c.default}}.call(this,r(574))},14511:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return l}));var o=r(1908),n=r(1690),i=r(3667),a=r(1916);function l(t){t=decodeURIComponent(t);var r,l=i.default.getHashVars(t);e.each(l,(function(t){var i=decodeURIComponent(t.key);if(0==i.indexOf("env[")&&"]"==i[i.length-1])try{var l="";try{l=atob(t.value)}catch(r){if(!e.endsWith(t.value,'"'))throw r;t.value=t.value.substring(0,t.value.length-1),l=atob(t.value)}var s=i.substring(4,i.length-1),c=JSON.parse(l),u=[];if(c instanceof Array){var d=c.length;for(r=0;r<d;r++)u.push(e.assign({type:"text",enabled:!0},c[r]))}else e.forOwn(c,(function(e,t){u.push({key:t,value:e,type:"text",enabled:!0})}));a.default.get().then((e=>{let t={name:"create",namespace:"environment",data:{id:n.default.guid(),name:s,values:u,owner:e.id}};Object(o.default)(t),pm.toasts.success("环境 "+s+" 已导入")})).catch((e=>{pm.logger.error("Error in creating evironment",e)}))}catch(e){console.log("Could not import environment")}}))}}.call(this,r(574))},14512:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return l}));var o=r(14510),n=r(1874),i=r(1690),a=r(3667);function l(t){o.default.importFileFromUrl(t,((r,l)=>{if(r)return pm.logger.error(r);o.default.checkImportEnvironmentFromUrl(t);var s=a.default.getUrlVars(t),c=e.find(s,(function(e){return"referrer"===e.key})),u=c?decodeURIComponent(c.value):"";n.default.addEvent("collection","create","run_button",null,{referrer:u,collection_id:l.id,collection_link_id:i.default.getCollectionLinkId(t)})}))}}.call(this,r(574))},14513:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s})),r.d(t,"parseUrlData",(function(){return c}));var o=r(574),n=r.n(o),i=r(4930),a=(r(1690),r(1866)),l=r(1860);function s(e,t){a.default.request(e).then((({body:r})=>{try{i.default.importData(r,{origin:"import/link",link:e}).then((()=>{n.a.isFunction(t)&&t(null,r)}))}catch(e){"Could not parse"==e?(pm.mediator.trigger("failedCollectionImport","format not recognized"),n.a.isFunction(t)&&t("format not recognized")):(pm.mediator.trigger("failedCollectionImport","无法导入: "+e),n.a.isFunction(t)&&t("无法导入: "+e))}})).catch((({error:e})=>{console.log("Error response while importing: ",e),pm.mediator.trigger("failedCollectionImport","从 URL 收到错误响应. 检查控制台以获取更多信息."),n.a.isFunction(t)&&t("从 URL 收到错误响应. 检查控制台以获取更多信息.")}))}function c(e){return"browser"===window.SDK_PLATFORM?l.default.request("/ws/proxy",{method:"post",data:{path:"/api/v1/download",service:"importer",method:"post",body:{url:e}}}).then((({body:e})=>e)).catch((e=>(pm.logger.warn("Error while parsing url data: ",e),pm.toasts.error("从链接获取数据时出错."),null))):a.default.request(e).then((({body:e})=>e)).catch((({error:e})=>(pm.logger.warn("Error while parsing url data: ",e),pm.toasts.error("从链接获取数据时出错."),null)))}},14514:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return a}));r(574);var o=r(4930),n=r(1509),i=r.n(n);function a(e,t,r){i.a.eachSeries(e,((n,i)=>{let a=new FileReader;a.onload=function(n){var a=n.currentTarget.result;if("importByFileContainer"===t&&r&&1===e.length)return r(a,{origin:"import/file"});o.default.importData(a,{origin:"import/file"},i)},a.readAsText(n)}))}},14515:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return c}));var o=r(2062),n=r(14516),i=r(1874),a=r(2058);const l={json:"application/json"},s="collection";function c(t,r={}){let c,u,d,p=r.type,f=e.get(r,"outputVersion","2.1.0");if(p)return n.default.exportSingle(p,t,r).then((e=>{if(!(e&&l[e.type]&&e[e.type]))throw console.warn("Invalid data or unsupported file type",e),new Error("saveEntity: invalid data received");return e})).then((t=>{c=t,u=l[c.type],d=e.get(c,"meta.fileName",p+".json")})).then((()=>JSON.stringify(c.json,null,"\t"))).then((e=>new Promise(((t,r)=>{Object(o.saveAndOpenFile)(d,e,u,((e,o)=>{if(e)return console.warn("Error while saving the exported entity",e),void r(e);t(o)}))})))).then((e=>{if(e!==a.EXPORT_STATE.SUCCESS)return;let r="browser"!==window.SDK_PLATFORM;switch(p){case s:i.default.addEvent(s,"download",f,null,{collection_id:t.id}),r&&pm.toasts.success("您的集合已成功导出.");break;case"environment":i.default.addEvent(p,"download"),r&&pm.toasts.success("您的环境已成功导出.");break;case"globals":i.default.addEvent(p,"download"),r&&pm.toasts.success("您的全局变量已成功导出.")}})).catch((e=>{pm.toasts.error("无法导出此实体. 请检查开发者工具."),console.warn("Error while exporting an entity",t,r,e)}));console.warn(`Unsupported type '${p}' for exporting`)}}.call(this,r(574))},14516:function(e,t,r){"use strict";r.r(t);var o=r(2067);t.default={exportSingle:o.default}},24762:function(e,t,r){"use strict";r.r(t),function(e){var o=r(24763),n=r(24764),i=r(11130),a=r(24765),l=r(24766),s=r(11691),c=r(24767),u=r(11683),d=r(2790),p=r.n(d),f=r(9578),m=r(6795),h=r(11817);function v(e,t){e?e.isUserFriendly?pm.toasts.error(e.message,{dedupeId:"failed-collection-import"}):pm.toasts.error("导入失败, 集合 "+t.name,{dedupeId:"failed-collection-import"}):(pm.toasts.success("集合 "+t.name+" 已导入"),setTimeout((()=>{m.default.publish(h.OPEN_INVITE_MEMBERS_NUDGE_EVENT)}),3e3))}t.default={checkImportEnvironmentFromUrl:o.default,importCollectionAndEnvironment:n.default,importData:async function(t,r,o){if(e.isEmpty(t))return e.isFunction(o)&&o();p.a.series([e=>{u.default.importCollections(t.collections,r,v,(t=>{e(null,t)}))},o=>{u.default.importGlobals(t.globals,e.pick(r,["activeWorkspace","silentToasts"]),(e=>{o(null,e)}))},o=>{u.default.importHeaderPresets(t.headerPresets,e.pick(r,["currentUserID","activeWorkspace","silentToasts"]),(e=>{o(null,e)}))},o=>{u.default.importEnvironments(t.environments,e.pick(r,["currentUserID","silentToasts","activeWorkspace"]),(e=>{o(null,e)}))},e=>{u.default.importRequests(t.requests,(t=>{e(null,t)}))},e=>{u.default.importCollectionRuns(t.runsInfo,t.events,r,f.handleCollectionRunImportStatus,(t=>{e(null,t)}))}],((t,r)=>{let n={};e.forEach(e.compact(r),(t=>{n[t.type]=e.pick(t,["total","imported","failed"])})),e.isFunction(o)&&o(n)}))},convertRawData:i.default,importDataAs:i.importDataAs,stringify:i.stringify,importFileFromUrl:a.default,parseUrlData:a.parseUrlData,importFiles:l.default,importFolder:s.default,saveEntity:c.default}}.call(this,r(2753))},24763:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return l}));var o=r(6393),n=r(5950),i=r(8945),a=r(6164);function l(t){t=decodeURIComponent(t);var r,l=i.default.getHashVars(t);e.each(l,(function(t){var i=decodeURIComponent(t.key);if(0==i.indexOf("env[")&&"]"==i[i.length-1])try{var l="";try{l=atob(t.value)}catch(r){if(!e.endsWith(t.value,'"'))throw r;t.value=t.value.substring(0,t.value.length-1),l=atob(t.value)}var s=i.substring(4,i.length-1),c=JSON.parse(l),u=[];if(c instanceof Array){var d=c.length;for(r=0;r<d;r++)u.push(e.assign({type:"text",enabled:!0},c[r]))}else e.forOwn(c,(function(e,t){u.push({key:t,value:e,type:"text",enabled:!0})}));a.default.get().then((e=>{let t={name:"create",namespace:"environment",data:{id:n.default.guid(),name:s,values:u,owner:e.id}};Object(o.default)(t),pm.toasts.success("环境 "+s+" 已导入")})).catch((e=>{pm.logger.error("Error in creating evironment",e)}))}catch(e){console.log("Could not import environment")}}))}}.call(this,r(2753))},24764:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return l}));var o=r(24762),n=r(2778),i=r(5950),a=r(8945);function l(t){o.default.importFileFromUrl(t,((r,l)=>{if(r)return pm.logger.error(r);o.default.checkImportEnvironmentFromUrl(t);var s=a.default.getUrlVars(t),c=e.find(s,(function(e){return"referrer"===e.key})),u=c?decodeURIComponent(c.value):"";n.default.addEvent("collection","create","run_button",null,{referrer:u,collection_id:l.id,collection_link_id:i.default.getCollectionLinkId(t)})}))}}.call(this,r(2753))},24765:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s})),r.d(t,"parseUrlData",(function(){return c}));var o=r(2753),n=r.n(o),i=r(11682),a=(r(5950),r(2767)),l=r(6053);function s(e,t){a.default.request(e).then((({body:r})=>{try{i.default.importData(r,{origin:"import/link",link:e}).then((()=>{n.a.isFunction(t)&&t(null,r)}))}catch(e){"Could not parse"==e?(pm.mediator.trigger("failedCollectionImport","format not recognized"),n.a.isFunction(t)&&t("format not recognized")):(pm.mediator.trigger("failedCollectionImport","无法导入: "+e),n.a.isFunction(t)&&t("无法导入: "+e))}})).catch((({error:e})=>{console.log("Error response while importing: ",e),pm.mediator.trigger("failedCollectionImport","从 URL 收到错误响应. 检查控制台以获取更多信息."),n.a.isFunction(t)&&t("从 URL 收到错误响应. 检查控制台以获取更多信息.")}))}function c(e){return"browser"===window.SDK_PLATFORM?l.default.request("/ws/proxy",{method:"post",data:{path:"/api/v1/download",service:"importer",method:"post",body:{url:e}}}).then((({body:e})=>e)).catch((e=>(pm.logger.warn("Error while parsing url data: ",e),pm.toasts.error("从链接获取数据时出错."),null))):a.default.request(e).then((({body:e})=>e)).catch((({error:e})=>(pm.logger.warn("Error while parsing url data: ",e),pm.toasts.error("从链接获取数据时出错."),null)))}},24766:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return a}));r(2753);var o=r(11682),n=r(2790),i=r.n(n);function a(e,t,r){i.a.eachSeries(e,((n,i)=>{let a=new FileReader;a.onload=function(n){var a=n.currentTarget.result;if("importByFileContainer"===t&&r&&1===e.length)return r(a,{origin:"import/file"});o.default.importData(a,{origin:"import/file"},i)},a.readAsText(n)}))}},24767:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return c}));var o=r(9579),n=r(11832),i=r(2778),a=r(13169);const l={json:"application/json"},s="collection";function c(t,r={}){let c,u,d,p=r.type,f=e.get(r,"outputVersion","2.1.0");if(p)return n.default.exportSingle(p,t,r).then((e=>{if(!(e&&l[e.type]&&e[e.type]))throw console.warn("Invalid data or unsupported file type",e),new Error("saveEntity: invalid data received");return e})).then((t=>{c=t,u=l[c.type],d=e.get(c,"meta.fileName",p+".json")})).then((()=>JSON.stringify(c.json,null,"\t"))).then((e=>new Promise(((t,r)=>{Object(o.saveAndOpenFile)(d,e,u,((e,o)=>{if(e)return console.warn("Error while saving the exported entity",e),void r(e);t(o)}))})))).then((e=>{if(e!==a.EXPORT_STATE.SUCCESS)return;let r="browser"!==window.SDK_PLATFORM;switch(p){case s:i.default.addEvent(s,"download",f,null,{collection_id:t.id}),r&&pm.toasts.success("您的集合已成功导出.");break;case"environment":i.default.addEvent(p,"download"),r&&pm.toasts.success("您的环境已成功导出.");break;case"globals":i.default.addEvent(p,"download"),r&&pm.toasts.success("您的全局变量已成功导出.")}})).catch((e=>{pm.toasts.error("无法导出此实体. 请检查开发者工具."),console.warn("Error while exporting an entity",t,r,e)}));console.warn(`Unsupported type '${p}' for exporting`)}}.call(this,r(2753))}}]);