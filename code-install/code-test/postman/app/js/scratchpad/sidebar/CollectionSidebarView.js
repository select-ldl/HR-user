(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{14487:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return b}));var n,s=i(2),o=i.n(s),r=i(2348),a=i.n(r),l=i(2353),c=i(2397),d=i(14488),p=i(5156),h=i(14490),u=i(14502),m=i(3801),g=i(14505);let b=Object(l.observer)(n=class extends s.Component{constructor(e){super(e),this.focus=this.focus.bind(this),this.focusCollection=this.focusCollection.bind(this),this.focusNext=this.focusNext.bind(this),this.listRef=null}getView(){const{model:e,status:t}=this.props.controller||{};return t===m.ERROR?o.a.createElement(g.default,{title:"无法加载集合",description:"尝试刷新此页面或过一段时间再检查"}):t===m.READY?o.a.createElement(c.default,{identifier:"collection"},o.a.createElement(h.default,{ref:e=>{this.listRef=e},model:e})):o.a.createElement(p.default,{hasIcon:!0})}focus(){e.invoke(this,"listRef.__wrappedInstance.focus")}focusCollection(t,i){e.invoke(this,"listRef.__wrappedInstance.focusCollection",t,i)}focusNext(){const t=e.head(e.get(this.props.controller,"model.collections"));e.invoke(this,"listRef.handleSelect",t.id)}render(){const{model:e}=this.props.controller||{};return o.a.createElement("div",{className:"collection-sidebar"},o.a.createElement("div",{className:"collection-sidebar-wrapper"},o.a.createElement(u.default,{model:e}),this.getView()))}})||n;b.propTypes={controller:a.a.shape({model:a.a.instanceOf(d.default),status:a.a.oneOf([m.ERROR,m.READY,m.LOADING])}).isRequired}}.call(this,i(574))},14490:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return A}));var n,s=i(2),o=i.n(s),r=i(2348),a=i.n(r),l=i(2353),c=i(2830),d=i(4459),p=i(1656),h=i(2375),u=i.n(h),m=i(2845),g=i(2397),b=i(14491),f=i(14494),S=i(14496),C=i(14497),I=i(14499),O=i(14500),v=i(2340),_=i(14488),E=i(3168),T=i(3167),D=i(14501);const N="empty",y="loading";let A=u()(n=Object(l.observer)(n=class extends s.Component{constructor(t){super(t),this.handleDragDrop=this.handleDragDrop.bind(this),this.handleCreateRequest=this.handleCreateRequest.bind(this),this.getListItem=this.getListItem.bind(this),this.getItemSize=this.getItemSize.bind(this),this.observeSizeChange=this.observeSizeChange.bind(this),this.unobserveSizeChange=this.unobserveSizeChange.bind(this),this.scrollToItemById=this.scrollToItemById.bind(this),this.debouncedOpenActiveItemInTab=e.debounce(this.openActiveItemInTab.bind(this),200),this.handleClickOutside=this.handleClickOutside.bind(this),this.heightSetForEmptyItems={},this.heightReactionDisposer=Object(p.reaction)((()=>e.get(this.props.model,"items")),(()=>{this.listRef&&this.listRef.resetAfterIndex(0)})),this.focusReactionDisposer=Object(p.reaction)((()=>e.get(this.props.model,"activeItem")),(e=>{e&&requestIdleCallback(this.scrollToItemById.bind(this,e.id))})),this.resizeObserver=new ResizeObserver((e=>{for(const t of e){if(!(t&&t.target&&t.target.dataset))return;const{index:e}=t.target.dataset;this.heightSetForEmptyItems[e]=t.target.offsetHeight}this.listRef.resetAfterIndex(0)})),this.editCache=null}componentWillUnmount(){this.heightReactionDisposer&&this.heightReactionDisposer(),this.focusReactionDisposer&&this.focusReactionDisposer(),this.props.model.activeItem&&this.props.model.activeItem.commitCachedRename(),clearTimeout(this.clearCollectionLoadingTimer)}getListItem({index:t,style:i}){const{model:n}=this.props,s=e.get(n,["items",t]),r=t&&e.get(n,["items",t-1]),{activeItem:a}=n;if(!s)return pm.logger.warn("CollectionSideBarListContainer~getListItem","Could not find any item at index",t),null;const l=n.isFocused(s.id),c={};switch(s.type===N&&(s.parent=r),a&&(c.show=this.shouldShowIndent(s,a),c.depth=a.depth-1),s.type){case y:return o.a.createElement("div",{className:"collection-virtualized-list-item__loading",style:i},o.a.createElement(D.default,{depth:s.depth,activeIndent:c}));case N:{const e=r.type===E.COLLECTION?r:n.getParentCollection(r);return o.a.createElement("div",{className:"collection-virtualized-list-item__empty",style:i},o.a.createElement(O.default,{parent:r,canAddRequest:e.userCanUpdate,depth:s.depth,index:t,observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,onAddRequest:this.handleCreateRequest,activeIndent:c}))}case E.COLLECTION:return o.a.createElement("div",{className:"collection-virtualized-list-item__head",style:i},o.a.createElement(g.default,{identifier:s.xpath,key:s.xpath},o.a.createElement(I.default,{key:s.id,item:s,model:n,persistentState:s._persistentState,onDragDrop:this.handleDragDrop})));case E.FOLDER:{const e=s.$collection;return o.a.createElement("div",{className:"collection-virtualized-list-item__folder",style:i},o.a.createElement(g.default,{identifier:s.xpath,key:s.xpath},o.a.createElement(f.default,{key:s.id,model:n,item:s,persistentState:s._persistentState,collection:e,isFocused:l,onDragDrop:this.handleDragDrop,activeIndent:c})))}case E.REQUEST:{const e=s.$collection;return o.a.createElement("div",{className:"collection-virtualized-list-item__request",style:i},o.a.createElement(g.default,{identifier:s.xpath,key:s.xpath},o.a.createElement(S.default,{key:s.id,model:n,item:s,persistentState:s._persistentState,collection:e,isFocused:l,isFirstChild:r&&r.depth<s.depth,onDragDrop:this.handleDragDrop,activeIndent:c})))}case E.RESPONSE:{const e=s.$collection;return o.a.createElement("div",{className:"collection-virtualized-list-item__example",style:i},o.a.createElement(g.default,{identifier:s.xpath,key:s.xpath},o.a.createElement(C.default,{key:s.id,model:n,item:s,persistentState:s._persistentState,collection:e,isFocused:l,isFirstChild:r&&r.depth<s.depth,onDragDrop:this.handleDragDrop,activeIndent:c})))}default:return null}}getItemSize(t){const i=e.get(this.props.model,["items",t]);return i?i.type===N?this.heightSetForEmptyItems[t]||52:28:0}getKeyMapHandlers(){return{nextItem:pm.shortcuts.handle("nextItem",this.focusNextShortcut.bind(this)),prevItem:pm.shortcuts.handle("prevItem",this.focusPrevShortcut.bind(this)),expandItem:pm.shortcuts.handle("expandItem",this.expandItemShortcut.bind(this)),collapseItem:pm.shortcuts.handle("collapseItem",this.collapseItemShortcut.bind(this)),select:pm.shortcuts.handle("select",this.selectItemShortcut.bind(this)),cut:pm.shortcuts.handle("cut",this.cutItemShortcut.bind(this)),copy:pm.shortcuts.handle("copy",this.copyItemShortcut.bind(this)),paste:pm.shortcuts.handle("paste",this.pasteItemShortcut.bind(this)),duplicate:pm.shortcuts.handle("duplicate",this.duplicateItemShortcut.bind(this)),delete:pm.shortcuts.handle("delete",this.deleteItemShortcut.bind(this)),rename:pm.shortcuts.handle("rename",this.handleRenameShortcut.bind(this)),search:pm.shortcuts.handle("search"),quit:pm.shortcuts.handle("quit",this.handleQuitShortcut.bind(this))}}observeSizeChange(e){this.resizeObserver&&this.resizeObserver.observe(e)}unobserveSizeChange(e,t){this.resizeObserver&&this.resizeObserver.unobserve(e),delete this.heightSetForEmptyItems[t]}handleQuitShortcut(){this.props.model.activeItem&&this.props.model.activeItem.cancelRename()}handleClickOutside(e){const t="input input-box inline-input"===(e&&e.target&&e.target.className),{activeItem:i}=this.props.model;!t&&i&&i._persistentState.isEditing&&(this.props.model.activeItem&&this.props.model.activeItem.commitCachedRename(),e&&e.stopPropagation())}handleRenameShortcut(){const{activeItem:e}=this.props.model;e&&e.handleAction(T.ACTION_TYPE_RENAME_TOGGLE)}shouldShowIndent(e,t){if(!t||!e)return!1;const i=this.props.model.getParent(t);if(!i)return!1;if(i.id===e.id)return!0;const n=e.type===N||e.type===y?e.parent:this.props.model.getParent(e);return!!n&&this.shouldShowIndent(n,t)}scrollToItemById(t){if(!t)return;const i=e.findIndex(e.get(this.props.model,"items"),(e=>e.id===t));i<0||this.listRef&&this.listRef.scrollToItem(i)}focus(){this.sidebarListRef&&this.sidebarListRef.focus()}openActiveItemInTab(){const{model:e}=this.props;e.activeItem&&e.activeItem.openInTab()}focusNextShortcut(e){e&&e.preventDefault();const{model:t}=this.props;t.focusNextItem(),this.debouncedOpenActiveItemInTab()}focusPrevShortcut(e){e&&e.preventDefault();const{model:t}=this.props;t.focusPreviousItem(),this.debouncedOpenActiveItemInTab()}expandItemShortcut(e){e&&e.preventDefault();const{model:t}=this.props||{},{activeItem:i}=t||{};i&&t.expandItem(i)}collapseItemShortcut(e){e&&e.preventDefault();const{model:t}=this.props||{},{activeItem:i}=t||{};if(!i)return;if(t.isOpen(i.id))return t.collapseItem(i);const n=t.getParent(i);n&&(t.isOpen(n.id)?t.collapseItem(n):t.focusItem(n))}selectItemShortcut(e){const{activeItem:t}=this.props.model;t&&(t.commitCachedRename(),e&&e.preventDefault(),t.type===E.REQUEST&&t.handleAction(T.ACTION_TYPE_SELECT,{returnKey:!0}))}cutItemShortcut(){const{model:e}=this.props||{},{activeItem:t}=e||{};if(e&&t){switch(t.type){case E.REQUEST:case E.FOLDER:if(!t.$collection.userCanUpdate)return pm.toasts.error("您没有执行该操作所需的权限.");break;default:return}e.cutItem()}}copyItemShortcut(){const{model:e}=this.props||{};e.copyItem()}pasteItemShortcut(){const{model:e}=this.props||{};return!(!e||!e.clipboard)&&(Object(v.isWorkspaceMember)()?void e.pasteItem():Object(v.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):Object(v.isLoggedIn)()?pm.toasts.error("您没有执行该操作所需的权限."):pm.mediator.trigger("showSignInModal",{type:"collection_sidebar",origin:"paste_item"}))}duplicateItemShortcut(){const{activeItem:e}=this.props.model||{};e&&e.handleAction(T.ACTION_TYPE_DUPLICATE)}deleteItemShortcut(e){const{activeItem:t}=this.props.model||{};t&&!t._persistentState.isEditing&&(e&&e.preventDefault(),t.handleAction(T.ACTION_TYPE_DELETE))}handleDragDrop(e,t,i){"tab"===t.type&&"runner"===t.id||e.id!==t.id&&(("request"===t.type&&"request"===e.type||"response"===t.type&&"response"===e.type)&&"on"===i&&(i="before"),this.props.model.reorder(e,t,i))}handleCreateRequest(e){return e.handleAction(T.ACTION_TYPE_ADD_REQUEST)}render(){const t=e.get(this.props.model,"items");if(e.isEmpty(t)){const t=e.get(this.props.model,"searchQuery");return o.a.createElement(b.default,{query:t})}const i=e=>o.a.createElement(l.Observer,null,this.getListItem.bind(this,e)),n=({height:e,width:n})=>o.a.createElement(l.Observer,null,(()=>o.a.createElement(c.VariableSizeList,{height:e,itemCount:t.length,itemSize:this.getItemSize,width:n,ref:e=>{this.listRef=e},overscanCount:5,className:"collection-sidebar-list__list"},i)));return o.a.createElement(m.default,{handlers:this.getKeyMapHandlers()},o.a.createElement("div",{className:"collection-sidebar-list",ref:e=>{this.sidebarListRef=e},onClickCapture:this.handleClickOutside},o.a.createElement(d.default,null,n)))}})||n)||n;A.propTypes={model:a.a.instanceOf(_.default).isRequired}}.call(this,i(574))},14491:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return m}));var n,s=i(2),o=i.n(s),r=i(2348),a=i.n(r),l=i(2353),c=i(9),d=i(1662),p=i(3180),h=i(14492),u=i(14493);let m=Object(l.observer)(n=class extends s.Component{constructor(e){super(e),this.handleCreateCollection=this.handleCreateCollection.bind(this)}getTooltipText(e,t){return t||"browser"!==window.SDK_PLATFORM?e?void 0:"您没有执行此操作的权限.":"登录以创建集合"}handleCreateCollection(){this.props.onClose&&this.props.onClose(),Object(p.createCollection)()}isCollectionAddEnabled(e,t){return"browser"===window.SDK_PLATFORM?t&&e:e}render(){const e=Object(d.getStore)("PermissionStore"),t=Object(d.getStore)("ActiveWorkspaceStore").id,i=e.can("addCollection","workspace",t),{isLoggedIn:n}=Object(d.getStore)("CurrentUserStore");return this.props.query?o.a.createElement(u.default,{searchQuery:this.props.query,illustration:o.a.createElement(c.IllustrationNoCollection,null)}):o.a.createElement(h.default,{illustration:o.a.createElement(c.IllustrationNoCollection,null),title:"您没有任何集合.",message:"集合使您可以对相关请求进行分组, 使它们更易于访问和运行.",action:{label:"创建集合",handler:this.handleCreateCollection,tooltip:this.getTooltipText(i,n)},hasPermissions:this.isCollectionAddEnabled(i,n)})}})||n;m.defaultProps={query:null,onClose:null},m.propTypes={query:a.a.string,onClose:a.a.func}},14494:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return D}));var n,s=i(2),o=i.n(s),r=i(5),a=i(2357),l=i.n(a),c=i(2348),d=i.n(c),p=i(2854),h=i(2353),u=i(9),m=i(3628),g=i(3120),b=i(1662),f=i(2397),S=i(2373),C=i(2340),I=i(3140),O=i(3167),v=i(14488),_=i(14495);const E={canDrag:e=>!e.item._persistentState.isEditing&&(Object(C.isWorkspaceMember)()&&e.collection.userCanUpdate),beginDrag:e=>({id:e.item.id,type:"folder",collection:e.item.collection}),endDrag(t,i){const n=i.getItem(),{dropItem:s,position:o}=i.getDropResult()||{};e.isUndefined(s)||t.onDragDrop(n,s,o)}},T={hover(e,t,i){const{persistentState:n}=e,s=t.getItem().id,o=e.item.id,a=t.getItem();let l=!1;if("request"!==a.type&&"folder"!==a.type||(l=e.collection.userCanUpdate),s===o||!l)return{};const c=t.getClientOffset(),d=Object(r.findDOMNode)(i).getBoundingClientRect(),p=d.top+30-7.5,h=d.top+7.5;"request"!==t.getItem().type&&c.y>p?n.scheduleHoverUpdate("bottom"):"request"!==t.getItem().type&&c.y<h?n.scheduleHoverUpdate("top"):c.y<p&&c.y>h?n.scheduleHoverUpdate("on"):n.scheduleHoverUpdate()},drop(e,t,i){const n=t.getItem().id,s=e.item.id,o=t.getItem();let a=!1;if("request"!==o.type&&"folder"!==o.type||(a=e.collection.userCanUpdate),n===s||!a)return{};const l=t.getClientOffset(),c=Object(r.findDOMNode)(i).getBoundingClientRect(),d=.25*c.height,p=c.bottom-d,h=c.top+d;let u;return"request"!==o.type&&l.y>p?u="after":"request"!==o.type&&l.y<h?u="before":l.y<p&&l.y>h&&(u="on"),{dropItem:{id:e.item.id,type:"folder",collection:e.item.collection},position:u}}};let D=Object(m.default)([{label:"添加请求",isVisible:e=>Object(b.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(O.ACTION_TYPE_ADD_REQUEST)}},{label:"添加文件夹",isVisible:e=>Object(b.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(O.ACTION_TYPE_ADD_FOLDER)}},{label:"重命名",shortcut:"rename",isVisible:e=>Object(b.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(O.ACTION_TYPE_RENAME_TOGGLE)}},{label:"复制",shortcut:"duplicate",isVisible:e=>Object(b.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(O.ACTION_TYPE_DUPLICATE)}},{label:"删除",shortcut:"delete",isVisible:e=>Object(b.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(O.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))(n=Object(p.DropTarget)(["collection-sidebar-request-item","collection-sidebar-folder-item"],T,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})})))(n=Object(p.DragSource)("collection-sidebar-folder-item",E,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(n=Object(h.observer)(n=class extends _.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this)}getClasses(){return l()({"collection-sidebar-list-item__entity":!0,"collection-sidebar-list-item__folder":!0,"is-drop-hovered-top":this.props.persistentState.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":this.props.persistentState.dropHoverBottom&&this.props.isDragOver})}getHeadClasses(){return l()({"collection-sidebar-list-item__folder__head":!0,"is-open":this.isOpen(),"is-hovered":this.props.persistentState.dropdownOpen,"is-focused":this.props.isFocused,"is-dragged":this.props.isDragging,"is-right-above":this.props.persistentState.dropHover&&this.props.isDragOver})}getFolderIconClasses(){return l()({"pm-icon":!0,"pm-icon-normal":!0,"collection-sidebar-list-item__folder__head__icon":!0,icon_folder:!0})}isOpen(){return this.props.model.isOpen(this.props.item.id)}onItemClick(){this.props.isContextMenuOpen()||super.onItemClick()}render(){const{connectDragSource:t,connectDropTarget:i,connectDragPreview:n,item:s,model:r,persistentState:a}=this.props,c=s.depth,d=r.isOpen(s.id)?"down":"right";return super.render(this.getClasses(),i(n(t(o.a.createElement("div",{title:s.name,className:this.getHeadClasses(),onClick:this.onItemClick},e.times(c,(e=>o.a.createElement("div",{key:`indent-${e}`,className:l()("collection-sidebar__indent",{"active-indent":this.showActiveIndent(e)})}))),o.a.createElement(S.Button,{type:"icon",onClick:this.handleItemToggle,className:"collection-sidebar-list-item__toggle-btn"},o.a.createElement(u.Icon,{name:`icon-direction-${d}`,className:"pm-icon pm-icon-normal"})),o.a.createElement("div",{className:"collection-sidebar-list-item__folder__icon-wrapper"},o.a.createElement(u.Icon,{name:"icon-entity-folder-stroke",className:this.getFolderIconClasses()})),o.a.createElement(f.default,{identifier:"head"},o.a.createElement("div",{className:"collection-sidebar-list-item__folder__head__meta"},o.a.createElement(g.default,{className:"collection-sidebar-list-item__entity__name collection-sidebar-list-item__folder__head__name",placeholder:"文件夹名称",ref:this.setInlineInputRef,value:s.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}))),o.a.createElement("div",{className:"collection-sidebar-list-item__folder__head__actions"},(a.isHovered||a.dropdownOpen)&&o.a.createElement(f.default,{identifier:"folderOption"},o.a.createElement("div",{className:"collection-sidebar-folder-dropdown-actions-wrapper"},o.a.createElement(I.default,{className:"collection-sidebar-folder-actions-dropdown",onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle,actions:s.actions})))))))))}})||n)||n)||n)||n;D.defaultProps={isFocused:!1,isDragOver:!1,isDragging:!1,isContextMenuOpen:e.noop,connectDragSource:e.noop,connectDropTarget:e.noop,connectDragPreview:e.noop},D.propTypes={collection:d.a.object.isRequired,item:d.a.object.isRequired,model:d.a.instanceOf(v.default).isRequired,isFocused:d.a.bool,isDragOver:d.a.bool,isDragging:d.a.bool,isContextMenuOpen:d.a.func,connectDragSource:d.a.func,connectDropTarget:d.a.func,connectDragPreview:d.a.func}}.call(this,i(574))},14495:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return l}));var n=i(2),s=i.n(n),o=i(2348),r=i.n(o),a=i(14488);class l extends n.Component{constructor(e){super(e),this.inlineInputRef=null}UNSAFE_componentWillUpdate(e){if(!this.props.isFocused&&e.isFocused){if(!this.$node)return;this.$node.scrollIntoViewIfNeeded?this.$node.scrollIntoViewIfNeeded():this.$node.scrollIntoView&&this.$node.scrollIntoView()}}componentWillUnmount(){this.props.persistentState.cancelHoverUpdate(),this.is_editing_reaction_dispose&&this.is_editing_reaction_dispose(),this.props.persistentState.clearInputRef()}onInlineInputToggle(e){const{persistentState:t}=this.props;e?t.focusOnInput():t.clearEditStateCache()}onInlineInputSubmit(e){const{item:t}=this.props;t.commitRename(e)}onItemClick(e){const{item:t,model:i}=this.props;i.focusItem(t),!i.isOpen(t.id)&&i.expandItem(t),t.openInTab(e)}setInlineInputRef(e){this.props.persistentState.setInputRef(e)}handleMouseHover(e){this.props.persistentState.setHovered(e)}handleActionSelect(e){const{item:t}=this.props;t.handleAction(e)}handleDropdownToggle(e){this.props.persistentState.setDropdownOpen(e)}handleItemToggle(e){const{model:t,item:i}=this.props;e&&e.stopPropagation(),t.toggleItem(i)}showActiveIndent(e){const{show:t,depth:i}=this.props.activeIndent;return t&&e===Number(i)}render(e,t){const i=this.handleMouseHover.bind(this,!0),n=this.handleMouseHover.bind(this,!1);return s.a.createElement("div",{ref:e=>{this.$node=e},className:e,onMouseOver:i,onMouseLeave:n},t)}}l.defaultProps={isFocused:!1,activeIndent:{show:!1,depth:0}},l.propTypes={model:r.a.instanceOf(a.default).isRequired,item:r.a.oneOfType([r.a.instanceOf(a.CollectionModel),r.a.instanceOf(a.FolderModel),r.a.instanceOf(a.RequestModel),r.a.instanceOf(a.ResponseModel)]).isRequired,persistentState:r.a.instanceOf(a.PersistentState).isRequired,activeIndent:r.a.object,isFocused:r.a.bool}},14496:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return N}));var n,s=i(2),o=i.n(s),r=i(5),a=i(2357),l=i.n(a),c=i(2348),d=i.n(c),p=i(2854),h=i(9),u=i(2353),m=i(3628),g=i(3120),b=i(5169),f=i(1662),S=i(2397),C=i(2373),I=i(4365),O=i(3167),v=i(14488),_=i(2340),E=i(14495);const T={canDrag:e=>!e.item._persistentState.isEditing&&(Object(_.isWorkspaceMember)()&&e.collection.userCanUpdate),beginDrag:e=>({id:e.item.id,type:"request",folder:e.item.folder,collection:e.item.collection}),endDrag(t,i){const n=i.getItem(),{dropItem:s,position:o}=i.getDropResult()||{};e.isUndefined(s)||t.onDragDrop(n,s,o)}},D={hover(e,t,i){const{persistentState:n}=e,s=t.getItem().id,o=e.item.id,a=t.getItem();let l=!1;if("response"!==a.type&&"request"!==a.type||(l=e.collection.userCanUpdate),s===o||!l)return{};const c=t.getClientOffset(),d=Object(r.findDOMNode)(i).getBoundingClientRect(),p=d.top+30-7.5,h=d.top+7.5;"response"!==t.getItem().type&&c.y>p?n.scheduleHoverUpdate("bottom"):"response"!==t.getItem().type&&c.y<h?n.scheduleHoverUpdate("top"):"request"!==t.getItem().type&&c.y<p&&c.y>h&&n.scheduleHoverUpdate("on")},drop(e,t,i){const n=t.getItem().id,s=e.item.id,o=t.getItem();let a=!1;if("request"!==o.type&&"response"!==o.type||(a=e.collection.userCanUpdate),n===s||!a)return{};const l=t.getClientOffset(),c=Object(r.findDOMNode)(i).getBoundingClientRect(),d=.25*c.height,p=c.bottom-d,h=c.top+d;let u="after";return"response"!==t.getItem().type&&l.y>p?u="after":"response"!==t.getItem().type&&l.y<h?u="before":"response"===t.getItem().type&&(u="on"),{dropItem:{id:e.item.id,type:"request",collection:e.item.collection},position:u}}};let N=Object(m.default)([{label:"在标签页中打开",onClick(e){e.item.handleAction(O.ACTION_TYPE_OPEN,{},{preview:!1})}},{label:"重命名",shortcut:"rename",isVisible:e=>Object(f.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(O.ACTION_TYPE_RENAME_TOGGLE)}},{label:"复制",shortcut:"duplicate",isVisible:e=>Object(f.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(O.ACTION_TYPE_DUPLICATE)}},{label:"删除",shortcut:"delete",isVisible:e=>Object(f.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(O.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))(n=Object(p.DropTarget)(["collection-sidebar-request-item","collection-sidebar-response-item"],D,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})})))(n=Object(p.DragSource)("collection-sidebar-request-item",T,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(n=Object(u.observer)(n=class extends E.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this)}getClasses(){return l()({"collection-sidebar-list-item__entity":!0,"collection-sidebar-list-item__request":!0,"is-active":this.props.selected})}getHeadClasses(){return l()({"collection-sidebar-list-item__request__head":!0,"is-open":this.isOpen(),"is-hovered":this.props.persistentState.dropdownOpen,"is-selected":this.props.selected,"is-focused":this.props.isFocused,"is-dragged":this.props.isDragging,"is-drop-hovered-top":this.props.persistentState.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":this.props.persistentState.dropHoverBottom&&this.props.isDragOver,"is-right-above":this.props.persistentState.dropHover&&this.props.isDragOver})}isOpen(){return this.props.model.isOpen(this.props.item.id)}onItemClick(e){this.props.isContextMenuOpen()||super.onItemClick(e)}render(){const{connectDragSource:t,connectDropTarget:i,connectDragPreview:n,model:s,item:r,persistentState:a}=this.props,c=r.depth,d=Boolean(r.responses.size),p=s.isOpen(r.id)?"down":"right";return super.render(this.getClasses(),i(n(t(o.a.createElement("div",{title:r.name,className:this.getHeadClasses(),onClick:this.onItemClick},e.times(c,(e=>o.a.createElement("div",{key:`indent-${e}`,className:l()("collection-sidebar__indent",{"active-indent":this.showActiveIndent(e)})}))),d?o.a.createElement(C.Button,{type:"icon",onClick:this.handleItemToggle,className:"collection-sidebar-list-item__toggle-btn"},o.a.createElement(h.Icon,{name:`icon-direction-${p}`,className:"pm-icon pm-icon-normal"})):o.a.createElement("div",{className:"collection-sidebar-list__request-spacing"}),o.a.createElement(b.default,{method:r.method||"GET"}),o.a.createElement(S.default,{identifier:"head"},o.a.createElement("div",{className:"collection-sidebar-list-item__request__meta"},o.a.createElement(g.default,{className:"collection-sidebar-list-item__entity__name collection-sidebar-list-item__request__name",placeholder:"请求名称",ref:this.setInlineInputRef,value:r.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}))),o.a.createElement("div",{className:"collection-sidebar-list-item__request__actions"},(a.isHovered||a.dropdownOpen)&&o.a.createElement(S.default,{identifier:"requestOption"},o.a.createElement("div",{className:"collection-sidebar-request-dropdown-actions-wrapper"},o.a.createElement(I.default,{className:"collection-sidebar-request-actions-dropdown",actions:r.actions,onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle})))))))))}})||n)||n)||n)||n;N.defaultProps={isFocused:!1,isDragOver:!1,isDragging:!1,selected:!1,isContextMenuOpen:e.noop,connectDragSource:e.noop,connectDropTarget:e.noop,connectDragPreview:e.noop},N.propTypes={collection:d.a.object.isRequired,item:d.a.object.isRequired,model:d.a.instanceOf(v.default).isRequired,activeIndent:d.a.object.isRequired,isFocused:d.a.bool,isDragOver:d.a.bool,isDragging:d.a.bool,selected:d.a.bool,isContextMenuOpen:d.a.func,connectDragSource:d.a.func,connectDropTarget:d.a.func,connectDragPreview:d.a.func}}.call(this,i(574))},14497:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return D}));var n,s=i(2),o=i.n(s),r=i(5),a=i(2357),l=i.n(a),c=i(2348),d=i.n(c),p=i(2854),h=i(9),u=i(2353),m=i(1662),g=i(3628),b=i(3120),f=i(2397),S=i(3167),C=i(14488),I=i(2340),O=i(14495),v=i(14498);const _=e=>{const t=Object(r.findDOMNode)(e).getBoundingClientRect();return t.top+t.height/2},E={canDrag:e=>!e.item._persistentState.isEditing&&(Object(I.isWorkspaceMember)()&&e.collection.userCanUpdate),beginDrag:e=>({id:e.item.id,type:"response",request:e.item.request}),endDrag(t,i){const n=i.getItem(),{dropItem:s,position:o}=i.getDropResult()||{};e.isUndefined(s)||t.onDragDrop(n,s,o)}},T={hover(e,t,i){const{persistentState:n}=e,s=t.getItem().id,o=e.item.id,r="response"===t.getItem().type&&e.collection.userCanUpdate;if(s===o||!r)return{};e.isFirstChild?t.getClientOffset().y>_(i)?n.scheduleHoverUpdate("bottom"):n.scheduleHoverUpdate("top"):n.scheduleHoverUpdate("bottom")},drop(e,t,i){const n=t.getItem().id,s=e.item.id,o="response"===t.getItem().type&&e.collection.userCanUpdate;if(n===s||!o)return{};let r="after";return e.isFirstChild&&(r=t.getClientOffset().y>_(i)?"after":"before"),{dropItem:{id:e.item.id,type:"response",request:e.item.request},position:r}}};let D=Object(g.default)([{label:"重命名",shortcut:"rename",isVisible:e=>Object(m.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(S.ACTION_TYPE_RENAME_TOGGLE)}},{label:"复制",shortcut:"duplicate",isVisible:e=>Object(m.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(S.ACTION_TYPE_DUPLICATE)}},{label:"删除",shortcut:"delete",isVisible:e=>Object(m.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate,onClick(e){e.item.handleAction(S.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))(n=Object(p.DropTarget)("collection-sidebar-response-item",T,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})})))(n=Object(p.DragSource)("collection-sidebar-response-item",E,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(n=Object(u.observer)(n=class extends O.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this)}getClasses(){return l()({"collection-sidebar-list-item__entity":!0,"collection-sidebar-list-item__request":!0,"is-active":this.props.selected})}getHeadClasses(){return l()({"collection-sidebar-list-item__request__head":!0,"is-drop-hovered-top":this.props.persistentState.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":(this.props.persistentState.dropHover||this.props.persistentState.dropHoverBottom)&&this.props.isDragOver,"is-hovered":this.props.persistentState.dropdownOpen,"is-selected":this.props.selected,"is-focused":this.props.isFocused,"is-dragged":this.props.isDragging})}onItemClick(){this.props.isContextMenuOpen()||super.onItemClick()}render(){const{connectDragSource:t,connectDropTarget:i,connectDragPreview:n,item:s,persistentState:r}=this.props,a=s.depth;return super.render(this.getClasses(),i(n(t(o.a.createElement("div",{className:this.getHeadClasses(),title:s.name,onClick:this.onItemClick},e.times(a,(e=>o.a.createElement("div",{key:`indent-${e}`,className:l()("collection-sidebar__indent",{"active-indent":this.showActiveIndent(e)})}))),o.a.createElement("div",{className:"collection-sidebar-list-item__example-icon__wrapper"},o.a.createElement(h.Icon,{name:"icon-entity-example-stroke",color:"content-color-secondary",className:"collection-sidebar-list-item__example-icon"})),o.a.createElement(f.default,{identifier:"head"},o.a.createElement("div",{className:"collection-sidebar-list-item__request__meta"},o.a.createElement(b.default,{className:"collection-sidebar-list-item__entity__name collection-sidebar-list-item__request__name",placeholder:"示例名称",ref:this.setInlineInputRef,value:s.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}))),o.a.createElement("div",{className:"collection-sidebar-list-item__request__actions"},(r.isHovered||r.dropdownOpen)&&o.a.createElement(f.default,{identifier:"responseOption"},o.a.createElement("div",{className:"collection-sidebar-request-dropdown-actions-wrapper"},o.a.createElement(v.default,{className:"collection-sidebar-request-actions-dropdown",actions:s.actions,onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle})))))))))}})||n)||n)||n)||n;D.defaultProps={isFocused:!1,isDragOver:!1,isDragging:!1,selected:!1,isContextMenuOpen:e.noop,connectDragSource:e.noop,connectDropTarget:e.noop,connectDragPreview:e.noop},D.propTypes={collection:d.a.object.isRequired,item:d.a.object.isRequired,model:d.a.instanceOf(C.default).isRequired,activeIndent:d.a.object.isRequired,isFocused:d.a.bool,isDragOver:d.a.bool,isDragging:d.a.bool,selected:d.a.bool,isContextMenuOpen:d.a.func,connectDragSource:d.a.func,connectDropTarget:d.a.func,connectDragPreview:d.a.func}}.call(this,i(574))},14498:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return u}));var n,s=i(2),o=i.n(s),r=i(2348),a=i.n(r),l=i(2353),c=i(1662),d=i(3141),p=i(3167),h=i(3123);let u=Object(l.observer)(n=class extends o.a.Component{constructor(e){super(e),this.getDisabledText=this.getDisabledText.bind(this)}getDisabledText(e){if(e)return Object(c.getStore)("OnlineStatusStore").userCanSave?h.DISABLED_TOOLTIP_NO_PERMISSION:h.DISABLED_TOOLTIP_IS_OFFLINE}getKeymapHandlers(){return{rename:pm.shortcuts.handle("rename",this.handleShortcutSelect.bind(this,p.ACTION_TYPE_RENAME_TOGGLE)),duplicate:pm.shortcuts.handle("duplicate",this.handleShortcutSelect.bind(this,p.ACTION_TYPE_DUPLICATE)),delete:pm.shortcuts.handle("delete",this.handleShortcutSelect.bind(this,p.ACTION_TYPE_DELETE))}}handleShortcutSelect(e){this.props.onSelect&&this.props.onSelect(e)}render(){return o.a.createElement(d.EntityActionsDropdown,{dropdownClassName:this.props.className,actions:this.props.actions,keymapHandlers:this.getKeymapHandlers(),onSelect:this.props.onSelect,onToggle:this.props.onToggle,getDisabledText:this.getDisabledText})}})||n;u.defaultProps={onToggle:e.noop,className:null},u.propTypes={actions:a.a.array.isRequired,onSelect:a.a.func.isRequired,onToggle:a.a.func,className:a.a.string}}.call(this,i(574))},14499:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return D}));var n,s=i(2),o=i.n(s),r=i(2854),a=i(2348),l=i.n(a),c=i(2353),d=i(2357),p=i.n(d),h=i(9),u=i(2373),m=i(3120),g=i(3677),b=i(3628),f=i(1662),S=i(2397),C=i(1683),I=i(3820),O=i(2340),v=i(3123),_=i(3167),E=i(14488),T=i(14495);let D=Object(b.default)([{label:"添加请求",isVisible:e=>Object(f.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanUpdate,onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_REQUEST)}},{label:"添加文件夹",isVisible:e=>Object(f.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanUpdate,onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_FOLDER)}},{label:"监视集合",isVisible(e){const t=Object(f.getStore)("PermissionStore"),i=Object(f.getStore)("ActiveWorkspaceStore").id;return Object(f.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.userCanCreateMonitor&&t.can("addMonitor","workspace",i)},onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_MONITOR)}},{label:"模拟集合",isVisible(e){const t=Object(f.getStore)("PermissionStore"),i=Object(f.getStore)("ActiveWorkspaceStore").id;return Object(f.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.userCanCreateMock&&t.can("addMock","workspace",i)},onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_MOCK)}},{label:"创建一个分叉",isVisible:()=>Object(f.getStore)("OnlineStatusStore").userCanSaveAndSync,onClick(e){e.item.handleAction(_.ACTION_TYPE_FORK)}},{label:"合并变更",isVisible:e=>Object(f.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.isForked,onClick(e){e.item.handleAction(_.ACTION_TYPE_MERGE)}},{label:"创建拉取请求",isVisible:e=>Object(f.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.isForked,onClick(e){e.item.handleAction(_.ACTION_TYPE_PULL_REQUEST)}},{label:"重命名",shortcut:"rename",isVisible:e=>Object(f.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanUpdate,onClick(e){e.item.handleAction(_.ACTION_TYPE_RENAME_TOGGLE)}},{label:"复制",shortcut:"duplicate",isVisible(){const e=Object(f.getStore)("PermissionStore"),t=Object(f.getStore)("ActiveWorkspaceStore").id;return Object(f.getStore)("OnlineStatusStore").userCanSave&&e.can("addCollection","workspace",t)},onClick(e){e.item.handleAction(_.ACTION_TYPE_DUPLICATE)}},{label:"导出",isVisible(e){const t=Object(f.getStore)("PermissionStore"),i=Object(C.decomposeUID)(e.item.id).modelId,{userCanSave:n}=Object(f.getStore)("OnlineStatusStore");return n&&t.can("view","collection",i)},onClick(e){e.item.handleAction(_.ACTION_TYPE_DOWNLOAD)}},{label:"管理角色",isVisible(){const e=Object(f.getStore)("CurrentUserStore");return Object(f.getStore)("OnlineStatusStore").userCanSave&&Boolean(e.team)},onClick(e){e.item.handleAction(_.ACTION_MANAGE_ROLES)}},{label:"从工作区中移除",isVisible(){const e=Object(f.getStore)("PermissionStore"),t=Object(f.getStore)("ActiveWorkspaceStore").id,i=Object(f.getStore)("SyncStatusStore").isSocketConnected;return Object(f.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.can("removeCollection","workspace",t)&&i},onClick(e){e.item.handleAction(_.ACTION_REMOVE_FROM_WORKSPACE)}},{label:"删除",shortcut:"delete",isVisible:e=>Object(f.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanDelete,onClick(e){e.item.handleAction(_.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))(n=Object(r.DropTarget)(["collection-sidebar-request-item","collection-sidebar-folder-item"],{canDrop:e=>e.item.userCanUpdate,drop(e,t){const i=t.getItem().id,n=e.item.id;let s=!1;switch(t.getItem().type){case"folder":case"request":e.item.userCanUpdate&&(s=!0)}return i!==n&&s?{dropItem:{id:n,type:"collection"},position:"on"}:{}}},((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0}),canDrop:t.canDrop()})))(n=Object(r.DragSource)("collection-sidebar-collection-item",{canDrag:e=>!e.item._persistentState.isEditing&&Object(O.isWorkspaceMember)(),beginDrag:e=>({id:e.item.id,type:"collection"})},((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(n=Object(c.observer)(n=class extends T.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this),this.handleToggleFavorite=this.handleToggleFavorite.bind(this)}getClasses(){return p()({"collection-sidebar-list-item__head":!0})}getHeadClasses(){return p()({"collection-sidebar-list-item__head__head":!0,"is-hovered":this.props.persistentState.dropdownOpen,"is-focused":this.isFocused(),"is-drop-hovered":this.props.item.userCanUpdate&&this.props.isDragOver,"is-favorited":this.isFavorite(),"is-open":this.isOpen()})}getActionsClasses(){return p()({"collection-sidebar-list-item__head__actions":!0,"is-selected":this.isExpanded()})}isExpanded(){return this.props.model.expandedItem===this.props.item.id}isFavorite(){return this.props.item.isFavorite}isOpen(){return this.props.model.isOpen(this.props.item.id)}isFocused(){return this.props.item.id===e.get(this.props.model,"activeItem.id")}onItemClick(){this.props.isContextMenuOpen()||super.onItemClick()}handleToggleFavorite(e){e&&e.stopPropagation(),this.props.item.handleAction(_.ACTION_TYPE_FAVORITE)}render(){const{connectDragSource:e,connectDropTarget:t,connectDragPreview:i,item:n,persistentState:s}=this.props,r=!Object(f.getStore)("OnlineStatusStore").userCanSave,a=this.isOpen()?"down":"right";return super.render(this.getClasses(),t(i(e(o.a.createElement("div",{title:n.name,className:this.getHeadClasses(),onClick:this.onItemClick},o.a.createElement(u.Button,{type:"icon",onClick:this.handleItemToggle,className:"collection-sidebar-list-item__toggle-btn"},o.a.createElement(h.Icon,{name:`icon-direction-${a}`,className:"pm-icon pm-icon-normal"})),o.a.createElement(S.default,{identifier:"head"},o.a.createElement("div",{className:"collection-sidebar-list-item__head__meta"},o.a.createElement("div",{className:"collection-sidebar-list-item__head__name__wrapper",title:n.name},o.a.createElement("div",{className:"collection-sidebar-list-item__head__name-icon__wrapper"},o.a.createElement(m.default,{className:"collection-sidebar-list-item__head__name",placeholder:"Collection Name",ref:this.setInlineInputRef,value:n.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}),o.a.createElement(g.default,{collection:n,userCanUpdate:n.userCanUpdate,showForkLabel:!0})),(s.isHovered||this.isFavorite())&&o.a.createElement(u.Button,{disabled:r,tooltip:r&&v.DISABLED_TOOLTIP_IS_OFFLINE,active:this.isFavorite(),className:"collection-sidebar-list-item__head__favorite-button",onClick:this.handleToggleFavorite},this.isFavorite()?o.a.createElement(h.Icon,{name:"icon-action-favorite-fill",className:"collection-sidebar-list-item__head__favorite-button-icon pm-icon pm-icon-secondary"}):o.a.createElement(h.Icon,{name:"icon-action-favorite-stroke",className:"pm-icon pm-icon-normal collection-sidebar-list-item__head__favorite-button-icon"}))))),o.a.createElement("div",{className:this.getActionsClasses()},o.a.createElement("div",{className:"collection-sidebar-list-item__head__action"},o.a.createElement(S.default,{identifier:"options"},o.a.createElement("div",{className:"collection-sidebar-dropdown-actions-wrapper"},(s.isHovered||s.dropdownOpen)&&o.a.createElement(I.default,{className:"collection-sidebar-actions-dropdown",onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle,actions:n.actions}))))))))))}})||n)||n)||n)||n;D.defaultProps={isEditing:!1,isDragOver:!1,setEditCache:e.noop,isContextMenuOpen:e.noop,editCache:null,connectDragSource:e.noop,connectDropTarget:e.noop,connectDragPreview:e.noop,canDrop:!1},D.propTypes={item:l.a.object.isRequired,model:l.a.instanceOf(E.default).isRequired,editCache:l.a.object,isEditing:l.a.bool,isDragOver:l.a.bool,setEditCache:l.a.func,isContextMenuOpen:l.a.func,connectDragSource:l.a.func,connectDropTarget:l.a.func,connectDragPreview:l.a.func,canDrop:l.a.bool}}.call(this,i(574))},14500:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return h}));var n=i(2),s=i.n(n),o=i(2348),r=i.n(o),a=i(5),l=i(2357),c=i.n(l),d=i(2373),p=i(3168);class h extends n.Component{componentDidMount(){this.selfNode=Object(a.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}render(){const{parent:t}=this.props,i=t.type===p.COLLECTION;return s.a.createElement("div",{className:"collection-sidebar-list-item__body--empty","data-index":this.props.index},e.times(this.props.depth,(e=>s.a.createElement("div",{key:`indent-${e}`,className:c()("collection-sidebar__indent",{"active-indent":e===Number(this.props.activeIndent.depth)&&this.props.activeIndent.show})}))),s.a.createElement("div",{className:c()("collection-sidebar-list__empty-item__content",{"collection-sidebar-list__empty-item__content__for-collection":i})},`此${({collection:"集合",folder:"文件夹"})[t.type]||t.type}是空的`,this.props.canAddRequest&&s.a.createElement("div",null,s.a.createElement(d.Button,{type:"text",className:"learn-more-link",onClick:()=>this.props.onAddRequest(this.props.parent)},"添加一个请求"),"以开始工作.")))}}h.defaultProps={observeSizeChange:null,unobserveSizeChange:null,onAddRequest:e.noop,canAddRequest:!1},h.propTypes={parent:r.a.object.isRequired,activeIndent:r.a.object.isRequired,index:r.a.number.isRequired,depth:r.a.number.isRequired,observeSizeChange:r.a.func,unobserveSizeChange:r.a.func,onAddRequest:r.a.func,canAddRequest:r.a.bool}}.call(this,i(574))},14501:function(e,t,i){"use strict";i.r(t),function(e){var n=i(2),s=i.n(n),o=i(2348),r=i.n(o),a=i(2357),l=i.n(a);function c(t){return s.a.createElement("div",{className:"collection-sidebar-list-item__loading"},e.times(t.depth,(e=>s.a.createElement("div",{key:`indent-${e}`,className:l()("collection-sidebar__indent",{"active-indent":e===Number(t.activeIndent.depth)&&t.activeIndent.show})}))),s.a.createElement("div",{className:"sidebar-loading-state--item"},s.a.createElement("div",{className:l()("has","sidebar-loading-state__icon")}),s.a.createElement("div",{className:"sidebar-loading-state__info"})))}c.propTypes={activeIndent:r.a.object.isRequired,depth:r.a.number.isRequired},t.default=c}.call(this,i(574))},14502:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return S}));var n,s=i(2),o=i.n(s),r=i(2348),a=i.n(r),l=i(2353),c=i(2373),d=i(1662),p=i(1863),h=i(14503),u=i(2844),m=i(2340),g=i(14488),b=i(3180),f=i(3123);let S=Object(l.observer)(n=class extends s.Component{constructor(e){super(e),this.state={isCollectionCreateEnabled:!0},this.handleNewCollectionClick=this.handleNewCollectionClick.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}handleNewCollectionClick(){this.setState({isCollectionCreateEnabled:!1}),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.setState({isCollectionCreateEnabled:!0})}),1e3),Object(b.createCollection)()}handleTrashOpen(){if(!Object(m.isWorkspaceMember)()){if(Object(m.canJoinWorkspace)())return pm.mediator.trigger("openUnjoinedWorkspaceModal");if(!Object(m.isLoggedIn)())return pm.mediator.trigger("showSignInModal",{type:"trash",origin:"open_trash"})}p.default.transitionTo("trash")}handleSearchChange(e){this.props.model&&this.props.model.setSearchQuery(e)}render(){const t=Object(d.getStore)("PermissionStore"),i=Object(d.getStore)("ActiveWorkspaceStore").id,n=t.can("addCollection","workspace",i),{userCanSave:s}=Object(d.getStore)("OnlineStatusStore"),r=s&&n&&this.state.isCollectionCreateEnabled;return o.a.createElement("div",{className:"collection-sidebar-menu"},o.a.createElement(h.default,{createNewConfig:{tooltip:s?n?"创建新的集合":"您无权在此工作区中创建集合.":f.DISABLED_TOOLTIP_IS_OFFLINE,disabled:!r,onCreate:this.handleNewCollectionClick,xPathIdentifier:"addCollection"},onSearch:this.handleSearchChange,searchQuery:e.get(this.props.model,"searchQuery"),moreActions:o.a.createElement(u.DropdownMenu,null,o.a.createElement(u.MenuItem,null,o.a.createElement(c.Button,{onClick:this.handleTrashOpen,tooltip:"您需要在工作区中才能打开回收站",disabled:!0,type:"text",className:"collection-sidebar-menu__actions-trash"},"打开回收站")))}))}})||n;S.propTypes={model:a.a.instanceOf(g.default).isRequired}}.call(this,i(574))},14505:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return d}));var n,s=i(2),o=i.n(s),r=i(2348),a=i.n(r),l=i(2353),c=i(2373);let d=Object(l.observer)(n=class extends s.Component{constructor(e){super(e),this.renderButton=this.renderButton.bind(this)}renderButton(){if(this.props.buttonText)return o.a.createElement(c.Button,{type:"secondary",onClick:this.props.handler},this.props.buttonText)}render(){return o.a.createElement("div",{className:"sidebar-error-wrapper"},o.a.createElement("div",{className:"sidebar-error-thumbnail"}),o.a.createElement("div",{className:"sidebar-error-content-container"},o.a.createElement("div",{className:"sidebar-error-header"},this.props.title),o.a.createElement("div",{className:"sidebar-error-content"},this.props.description),this.renderButton()))}})||n;d.defaultProps={description:null,buttonText:null,handler:e.noop},d.propTypes={title:a.a.string.isRequired,description:a.a.string,buttonText:a.a.string,handler:a.a.func}}.call(this,i(574))},24644:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return S}));var n,s=i(2),o=i.n(s),r=i(2756),a=i.n(r),l=i(2353),c=i(7321),d=i(5929),p=i(11325),h=i(11789),u=i(24645),m=i(24677),g=i(9059),b=i(24678),f=i(8646);let S=Object(l.observer)(n=class extends s.Component{constructor(e){super(e),this.focus=this.focus.bind(this),this.focusCollection=this.focusCollection.bind(this),this.focusNext=this.focusNext.bind(this),this.listRef=null}getView(){const{model:e,status:t}=this.props.controller||{},{isConsistentlyOffline:i}=Object(d.getStore)("SyncStatusStore");return i&&t===g.LOADING?o.a.createElement(f.SidebarOfflineState,null):t===g.ERROR?o.a.createElement(b.default,{title:"无法加载集合",description:"尝试刷新此页面或过一段时间再检查"}):t===g.READY?o.a.createElement(c.default,{identifier:"collection"},o.a.createElement(u.default,{ref:e=>{this.listRef=e},model:e})):o.a.createElement(h.default,{hasIcon:!0})}focus(){e.invoke(this,"listRef.__wrappedInstance.focus")}focusCollection(t,i){e.invoke(this,"listRef.__wrappedInstance.focusCollection",t,i)}focusNext(){const t=e.head(e.get(this.props.controller,"model.collections"));e.invoke(this,"listRef.handleSelect",t.id)}render(){const{model:e}=this.props.controller||{};return o.a.createElement("div",{className:"collection-sidebar"},o.a.createElement("div",{className:"collection-sidebar-wrapper"},o.a.createElement(m.default,{model:e}),this.getView()))}})||n;S.propTypes={controller:a.a.shape({model:a.a.instanceOf(p.default),status:a.a.oneOf([g.ERROR,g.READY,g.LOADING])}).isRequired}}.call(this,i(2753))},24677:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return C}));var n,s=i(2),o=i.n(s),r=i(2756),a=i.n(r),l=i(2353),c=i(7124),d=i(5929),p=i(2765),h=i(24586),u=i(7307),m=i(6367),g=i(6729),b=i(11325),f=i(6917),S=i(8759);let C=Object(l.observer)(n=class extends s.Component{constructor(e){super(e),this.state={isCollectionCreateEnabled:!0},this.handleNewCollectionClick=this.handleNewCollectionClick.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}handleNewCollectionClick(){this.setState({isCollectionCreateEnabled:!1}),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.setState({isCollectionCreateEnabled:!0})}),1e3),Object(f.createCollection)()}handleTrashOpen(){if(!Object(g.isWorkspaceMember)()){if(Object(g.canJoinWorkspace)())return pm.mediator.trigger("openUnjoinedWorkspaceModal");if(!Object(g.isLoggedIn)())return pm.mediator.trigger("showSignInModal",{type:"trash",origin:"open_trash"})}p.default.transitionTo("trash")}handleSearchChange(e){this.props.model&&this.props.model.setSearchQuery(e)}render(){const t=Object(d.getStore)("ActiveWorkspacePermissionStore"),i=t&&t.permissions,n=e.get(i,m.WORKSPACE_PERMISSIONS.ADD_COLLECTION_TO_WORKSPACE,!0),{userCanSave:s}=Object(d.getStore)("OnlineStatusStore"),r=s&&n&&this.state.isCollectionCreateEnabled,a=!Object(d.getStore)("SyncStatusStore").isSocketConnected,l=Object(g.isLoggedIn)()&&!(Object(g.isWorkspaceMember)()||Object(g.canJoinWorkspace)())||a;let p=l?"Only members of this workspace can recover deleted collections":"Recover your deleted collections";return p=a?"You can perform this action once you're back online":p,o.a.createElement("div",{className:"collection-sidebar-menu"},o.a.createElement(h.default,{createNewConfig:{tooltip:s?n?"创建新的集合":S.DISABLED_TOOLTIP_NO_PERMISSION:S.DISABLED_TOOLTIP_IS_OFFLINE,disabled:!r,onCreate:this.handleNewCollectionClick,xPathIdentifier:"addCollection"},onSearch:this.handleSearchChange,searchQuery:e.get(this.props.model,"searchQuery"),moreActions:o.a.createElement(u.DropdownMenu,null,o.a.createElement(u.MenuItem,null,o.a.createElement(c.Button,{onClick:this.handleTrashOpen,tooltip:p,disabled:l,type:"text",className:"collection-sidebar-menu__actions-trash"},"打开回收站")))}))}})||n;C.propTypes={model:a.a.instanceOf(b.default).isRequired}}.call(this,i(2753))},24678:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return d}));var n,s=i(2),o=i.n(s),r=i(2756),a=i.n(r),l=i(2353),c=i(7124);let d=Object(l.observer)(n=class extends s.Component{constructor(e){super(e),this.renderButton=this.renderButton.bind(this)}renderButton(){if(this.props.buttonText)return o.a.createElement(c.Button,{type:"secondary",onClick:this.props.handler},this.props.buttonText)}render(){return o.a.createElement("div",{className:"sidebar-error-wrapper"},o.a.createElement("div",{className:"sidebar-error-thumbnail"}),o.a.createElement("div",{className:"sidebar-error-content-container"},o.a.createElement("div",{className:"sidebar-error-header"},this.props.title),o.a.createElement("div",{className:"sidebar-error-content"},this.props.description),this.renderButton()))}})||n;d.defaultProps={description:null,buttonText:null,handler:e.noop},d.propTypes={title:a.a.string.isRequired,description:a.a.string,buttonText:a.a.string,handler:a.a.func}}.call(this,i(2753))}}]);