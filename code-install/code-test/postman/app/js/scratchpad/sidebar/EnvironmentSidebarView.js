(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{14517:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return h}));var n,s=i(2),a=i.n(s),r=i(2348),o=i.n(r),l=i(2353),c=i(14518),d=i(14524);let h=Object(l.observer)(n=class extends s.Component{render(){const{controller:e}=this.props;return a.a.createElement(c.default,{model:e.model})}})||n;h.propTypes={controller:o.a.shape({model:o.a.instanceOf(d.default)}).isRequired}},14518:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return u}));var n,s=i(2),a=i.n(s),r=i(2348),o=i.n(r),l=i(2353),c=i(2397),d=i(14519),h=i(14520),m=i(14524);let u=Object(l.observer)(n=class extends s.Component{render(){return a.a.createElement("div",{className:"env-sidebar-container"},a.a.createElement(d.default,{model:this.props.model}),a.a.createElement(c.default,{identifier:"environment"},a.a.createElement(h.default,{model:this.props.model})))}})||n;u.propTypes={model:o.a.instanceOf(m.default).isRequired}},14519:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return h}));var n,s=i(2),a=i.n(s),r=i(2353),o=i(1662),l=i(14503),c=i(3826),d=i(3123);let h=Object(r.observer)(n=class extends s.Component{constructor(e){super(e),this.state={isEnvCreateEnabled:!0},this.handleCreate=this.handleCreate.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}handleCreate(){this.setState({isEnvCreateEnabled:!1}),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.setState({isEnvCreateEnabled:!0})}),1e3),Object(c.createEnvironment)({openInTab:!0})}handleSearchChange(e){this.props.model&&this.props.model.setSearchQuery(e)}render(){const{userCanSave:e}=Object(o.getStore)("OnlineStatusStore"),t=Object(o.getStore)("PermissionStore").can("addEnvironment","workspace",Object(o.getStore)("ActiveWorkspaceStore").id),i=e&&t&&this.state.isEnvCreateEnabled;return a.a.createElement(l.default,{createNewConfig:{tooltip:e?t?"创建新的环境":d.DISABLED_TOOLTIP_NO_PERMISSION:d.DISABLED_TOOLTIP_IS_OFFLINE,disabled:!i,onCreate:this.handleCreate,xPathIdentifier:"addEnvironment"},onSearch:this.handleSearchChange,searchQuery:this.props.model.searchQuery})}})||n},14520:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return _}));var n,s=i(2),a=i.n(s),r=i(2348),o=i.n(r),l=i(1656),c=i(2353),d=i(2375),h=i.n(d),m=i(4459),u=i(2830),p=i(9),E=i(2845),v=i(1662),b=i(2397),f=i(14521),I=i(14523),S=i(14524),C=i(3826),g=i(3122),O=i(3827),A=i(3168),T=i(14492),R=i(14493),N=i(5156);let _=h()(n=Object(c.observer)(n=class extends s.Component{constructor(e){super(e),this.editCache=null,this.listItemRefs={},this.getItemSize=this.getItemSize.bind(this),this.scrollToItem=this.scrollToItem.bind(this),this.setEditCache=this.setEditCache.bind(this),this.saveCachedValue=this.saveCachedValue.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.focusNext=this.focusNext.bind(this),this.focusPrev=this.focusPrev.bind(this),this.deleteItem=this.deleteItem.bind(this),this.renameItem=this.renameItem.bind(this),this.duplicateItem=this.duplicateItem.bind(this)}componentDidMount(){this.scrollToViewReactionDisposer=Object(l.reaction)((()=>e.get(this.props,"model.activeItemIndex")),(e=>this.scrollToItem(e))),this.resetHeightReactionDisposer=Object(l.reaction)((()=>e.get(this.props,"model.items")),(()=>{this.listRef&&this.listRef.resetAfterIndex(0)}))}componentWillUnmount(){this.scrollToViewReactionDisposer&&this.scrollToViewReactionDisposer(),this.resetHeightReactionDisposer&&this.resetHeightReactionDisposer(),clearTimeout(this.clearCollectionLoadingTimer)}getSidebarEmptyState(){const e=Object(v.getStore)("PermissionStore").can("addEnvironment","workspace",Object(v.getStore)("ActiveWorkspaceStore").id);return a.a.createElement(T.default,{illustration:a.a.createElement(p.IllustrationNoEnvironment,null),title:"您没有任何环境.",message:"环境是一组变量,允许您切换请求的上下文.",action:e&&{label:"创建环境",handler:C.createEnvironment}})}getGlobalsListItem(){return a.a.createElement(b.default,{identifier:"globals"},a.a.createElement(I.default,{model:this.props.model.globals}))}getItemSize(){return 28}getListItem({style:t,index:i}){const{model:n}=this.props,s=e.get(n,["items",i]);if(!s)return null;const{id:r}=s;return a.a.createElement(b.default,{identifier:r},a.a.createElement("div",{style:t},a.a.createElement(f.default,{ref:e=>{this.listItemRefs[r]=e},key:r,index:i,item:s,model:n,setEditCache:this.setEditCache,editCache:e.get(this.editCache,"index")===i?this.editCache:null})))}getKeyMapHandlers(){return{quit:pm.shortcuts.handle("quit",this.setEditCache.bind(this,null)),select:pm.shortcuts.handle("select",this.saveCachedValue),nextItem:pm.shortcuts.handle("nextItem",this.focusNext),prevItem:pm.shortcuts.handle("prevItem",this.focusPrev),delete:pm.shortcuts.handle("delete",this.deleteItem),rename:pm.shortcuts.handle("rename",this.renameItem),duplicate:pm.shortcuts.handle("duplicate",this.duplicateItem)}}setEditCache(e){this.editCache=e}saveCachedValue(){if(!this.editCache)return;const{index:t,inlineInput:i}=this.editCache,n=e.get(this.props.model,["items",t]),s=(a=i,e.get(a,"inlineInput.value"));var a;n&&!e.isNil(s)&&this.props.model.handleAction(n.id,O.ACTION_TYPE_RENAME,{name:s})}focusNext(e){e&&e.preventDefault(),this.props.model.focusNext()}focusPrev(e){e&&e.preventDefault(),this.props.model.focusPrev()}deleteItem(){this.props.model.handleAction(e.get(this.props.model,"activeItem"),O.ACTION_TYPE_DELETE)}renameItem(){if(!Object(v.getStore)("OnlineStatusStore").userCanSave)return Object(g.showOfflineActionDisabledToast)();e.invoke(this.listItemRefs,[e.get(this.props.model,"activeItem"),"handleEditName"])}duplicateItem(){this.props.model.handleAction(e.get(this.props.model,"activeItem"),O.ACTION_TYPE_DUPLICATE)}handleClickOutside(e){const t="input input-box inline-input"===(e&&e.target&&e.target.className);this.editCache&&!t&&this.saveCachedValue()}scrollToItem(t){!e.isEmpty(this.listRef)&&!e.isNil(t)&&this.listRef.scrollToItem(t)}render(){const{model:t}=this.props,i=e.size(t.items);if(t.isLoading)return a.a.createElement("div",{className:"env-sidebar-list-container"},this.getGlobalsListItem(),a.a.createElement(N.default,null));if(e.isEmpty(t.items)){if(e.isEmpty(t.searchQuery))return a.a.createElement("div",{className:"env-sidebar-list-container"},this.getGlobalsListItem(),this.getSidebarEmptyState());if(!A.GLOBALS.includes(t.searchQuery))return a.a.createElement(R.default,{searchQuery:t.searchQuery,illustration:a.a.createElement(p.IllustrationNoEnvironment,null)})}const n=e=>a.a.createElement(c.Observer,null,this.getListItem.bind(this,e));return a.a.createElement(E.default,{keyMap:pm.shortcuts.getShortcuts(),handlers:this.getKeyMapHandlers()},a.a.createElement("div",{className:"env-sidebar-list-container",onClick:this.handleClickOutside},this.getGlobalsListItem(),a.a.createElement("div",{className:"env-sidebar-list"},a.a.createElement(m.default,null,(({height:e,width:t})=>a.a.createElement(u.VariableSizeList,{height:e,width:t,itemCount:i,itemSize:this.getItemSize,overscanCount:10,ref:e=>{this.listRef=e}},n))))))}})||n)||n;_.propTypes={model:o.a.instanceOf(S.default).isRequired}}.call(this,i(574))},14521:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return g}));var n,s=i(2),a=i.n(s),r=i(2353),o=i(2357),l=i.n(o),c=i(2348),d=i.n(c),h=i(9),m=i(14522),u=i(1662),p=i(3631),E=i(2373),v=i(2397),b=i(3979),f=i(3827),I=i(2401),S=i(3697),C=i(3122);let g=Object(r.observer)(n=class extends s.Component{constructor(e){super(e),this.handleEditName=this.handleEditName.bind(this),this.handleItemSelect=this.handleItemSelect.bind(this),this.handleRenameSubmit=this.handleRenameSubmit.bind(this),this.handleSetActiveEnvironment=this.handleSetActiveEnvironment.bind(this),this.handleRemoveActiveEnvironment=this.handleRemoveActiveEnvironment.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.containerRef=this.containerRef.bind(this),this.getStatusIndicators=this.getStatusIndicators.bind(this)}componentDidMount(){this.props.editCache&&this.listItemRef&&(this.handleEditName(),this.listItemRef.setEditState(this.props.editCache.inlineInput))}componentWillUnmount(){const{listItemRef:e}=this;e&&e.isEditing()&&this.props.setEditCache({index:this.props.index,inlineInput:e.getEditState()})}getStatusIndicators(){return a.a.createElement(b.default,{environment:this.props.item,showForkLabel:!0})}getRightAlignedContainer(e,t){const i=l()({"env-actions-icon-container":!0,isHovered:e||t,isActive:this.props.item.isActive});return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:i},a.a.createElement(E.Button,{type:"icon",tooltip:"设为非活动",onClick:this.handleRemoveActiveEnvironment,className:"sidebar-action-btn active-env-icon"},a.a.createElement(h.Icon,{name:"icon-state-success-fill-small",size:"large",color:"content-color-primary"})),a.a.createElement(E.Button,{type:"icon",tooltip:"设为活动",onClick:this.handleSetActiveEnvironment,className:"sidebar-action-btn inactive-env-icon"},a.a.createElement(h.Icon,{name:"icon-state-success-stroke",size:"large",color:"content-color-primary"}))),!e&&!t&&this.props.item.isActive&&a.a.createElement("div",{className:"env-actions__more-actions-placeholder"}))}getMenuItemIconClasses(e){return l()({"dropdown-menu-item-icon":!0},{"pm-icon":!0},{"pm-icon-normal":!0},`menu-icon--${e}`)}getMenuItems(){const{model:t,item:i}=this.props;return e.map(t.getActions(i.id),(e=>{const t=a.a.createElement("span",{className:"env-action-item"},a.a.createElement("div",{className:"dropdown-menu-item-label"},e.label),e.shortcut&&a.a.createElement("div",{className:"dropdown-menu-item-shortcut"},Object(p.getShortcutByName)(e.shortcut)));return!e.hide&&a.a.createElement(I.MenuItem,{key:e.type,refKey:e.type,disabled:!e.isEnabled,disabledText:S.DISABLED_IN_SCRATCHPAD_TOOLTIP},e.xpathLabel?a.a.createElement(v.default,{identifier:e.xpathLabel},t):t)}))}getActionsMenuItems(){return a.a.createElement(I.DropdownMenu,{className:"env-dropdown-menu","align-right":!0},this.getMenuItems())}containerRef(e){this.listItemRef=e}handleSetActiveEnvironment(){this.props.model.handleAction(this.props.item.id,f.ACTION_TYPE_SET_ACTIVE)}handleRemoveActiveEnvironment(){this.props.model.handleAction(this.props.item.id,f.ACTION_TYPE_SET_ACTIVE,{noEnvironment:!0})}handleEditName(){e.invoke(this.listItemRef,"editText")}async handleRenameSubmit(e){await this.props.model.handleAction(this.props.item.id,f.ACTION_TYPE_RENAME,{name:e}),this.props.setEditCache(null)}async handleDropdownActionSelect(e){if(e===f.ACTION_TYPE_RENAME_TOGGLE)return Object(u.getStore)("OnlineStatusStore").userCanSave?this.handleEditName():Object(C.showOfflineActionDisabledToast)();await this.props.model.handleAction(this.props.item.id,e)}handleItemSelect(){this.props.model.openInTab(this.props.item.id)}render(){const{item:t,model:i}=this.props;return a.a.createElement(m.default,{ref:this.containerRef,text:t.name,isForked:!(!e.get(t,"attributes.fork.forkId")&&!e.get(t,"attributes.fork.id")),isSelected:i.activeItem===t.id,onClick:this.handleItemSelect,onRename:this.handleRenameSubmit,statusIndicators:this.getStatusIndicators,rightMetaComponent:(...e)=>a.a.createElement(r.Observer,null,this.getRightAlignedContainer.bind(this,...e)),moreActions:this.getActionsMenuItems(),onActionsDropdownSelect:this.handleDropdownActionSelect})}})||n;g.propTypes={index:d.a.number.isRequired,item:d.a.object.isRequired,model:d.a.object.isRequired,editCache:d.a.object.isRequired,setEditCache:d.a.func.isRequired}}.call(this,i(574))},14523:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return u}));var n,s=i(2),a=i.n(s),r=i(2353),o=i(2357),l=i.n(o),c=i(2348),d=i.n(c),h=i(14522),m=i(14524);let u=Object(r.observer)(n=class extends s.Component{constructor(e){super(e),this.handleSelect=this.handleSelect.bind(this)}getItemClasses(){return l()({"globals-sidebar-list-item":!0,selected:this.props.model.isActive})}handleSelect(){this.props.model.openInTab()}render(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(h.default,{text:"全局",isSelected:this.props.model.isActive,onClick:this.handleSelect}),a.a.createElement("div",{className:"globals-separator"}))}})||n;u.propTypes={model:d.a.instanceOf(m.GlobalsModel).isRequired}},24768:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return u}));var n,s=i(2),a=i.n(s),r=i(2756),o=i.n(r),l=i(2353),c=i(5929),d=i(24769),h=i(8646),m=i(24774);let u=Object(l.observer)(n=class extends s.Component{render(){const{controller:t}=this.props,{isConsistentlyOffline:i}=Object(c.getStore)("SyncStatusStore");return i&&e.get(t,"model.isLoading")?a.a.createElement(h.SidebarOfflineState,null):a.a.createElement(d.default,{model:t.model})}})||n;u.propTypes={controller:o.a.shape({model:o.a.instanceOf(m.default)}).isRequired}}.call(this,i(2753))},24769:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return u}));var n,s=i(2),a=i.n(s),r=i(2756),o=i.n(r),l=i(2353),c=i(7321),d=i(24770),h=i(24771),m=i(24774);let u=Object(l.observer)(n=class extends s.Component{render(){return a.a.createElement("div",{className:"env-sidebar-container"},a.a.createElement(d.default,{model:this.props.model}),a.a.createElement(c.default,{identifier:"environment"},a.a.createElement(h.default,{model:this.props.model})))}})||n;u.propTypes={model:o.a.instanceOf(m.default).isRequired}},24770:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return m}));var n,s=i(2),a=i.n(s),r=i(2353),o=i(5929),l=i(24586),c=i(6367),d=i(9566),h=i(8759);let m=Object(r.observer)(n=class extends s.Component{constructor(e){super(e),this.state={isEnvCreateEnabled:!0},this.handleCreate=this.handleCreate.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}handleCreate(){this.setState({isEnvCreateEnabled:!1}),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.setState({isEnvCreateEnabled:!0})}),1e3),Object(d.createEnvironment)({openInTab:!0})}handleSearchChange(e){this.props.model&&this.props.model.setSearchQuery(e)}render(){const{userCanSave:t}=Object(o.getStore)("OnlineStatusStore"),i=Object(o.getStore)("ActiveWorkspacePermissionStore"),n=i&&i.permissions,s=e.get(n,c.WORKSPACE_PERMISSIONS.ADD_ENVIRONMENT_TO_WORKSPACE,!0),r=t&&s&&this.state.isEnvCreateEnabled;return a.a.createElement(l.default,{createNewConfig:{tooltip:t?s?"创建新的环境":h.DISABLED_TOOLTIP_NO_PERMISSION:h.DISABLED_TOOLTIP_IS_OFFLINE,disabled:!r,onCreate:this.handleCreate,xPathIdentifier:"addEnvironment"},onSearch:this.handleSearchChange,searchQuery:this.props.model.searchQuery})}})||n}.call(this,i(2753))},24771:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return D}));var n,s=i(2),a=i.n(s),r=i(2756),o=i.n(r),l=i(1656),c=i(2353),d=i(7126),h=i.n(d),m=i(10228),u=i(8276),p=i(9),E=i(2754),v=i(5929),b=i(7321),f=i(6367),I=i(24772),S=i(24773),C=i(24774),g=i(9566),O=i(6732),A=i(9567),T=i(6769),R=i(24588),N=i(11281),_=i(11789);const y=(t,i)=>{const{model:n}=i,s=e.get(n,["items",t]);if(!s)return"0";const{id:a}=s;return a},x=Object(c.observer)((({index:t,data:i,style:n})=>{const{model:s}=i,r=e.get(s,["items",t]);if(!r)return null;const{id:o}=r;return a.a.createElement(b.default,{identifier:o},a.a.createElement("div",{style:n},a.a.createElement(I.default,{ref:e=>{i.listItemRefs[o]=e},key:o,index:t,item:r,model:s,setEditCache:i.setEditCache,editCache:e.get(i.editCache,"index")===t?i.editCache:null})))}));let D=h()(n=Object(c.observer)(n=class extends s.Component{constructor(e){super(e),this.editCache=null,this.listItemRefs={},this.getItemSize=this.getItemSize.bind(this),this.scrollToItem=this.scrollToItem.bind(this),this.setEditCache=this.setEditCache.bind(this),this.saveCachedValue=this.saveCachedValue.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.focusNext=this.focusNext.bind(this),this.focusPrev=this.focusPrev.bind(this),this.deleteItem=this.deleteItem.bind(this),this.renameItem=this.renameItem.bind(this),this.duplicateItem=this.duplicateItem.bind(this)}componentDidMount(){this.scrollToViewReactionDisposer=Object(l.reaction)((()=>e.get(this.props,"model.activeItemIndex")),(e=>this.scrollToItem(e))),this.resetHeightReactionDisposer=Object(l.reaction)((()=>e.get(this.props,"model.items")),(()=>{this.listRef&&this.listRef.resetAfterIndex(0)}))}componentWillUnmount(){this.scrollToViewReactionDisposer&&this.scrollToViewReactionDisposer(),this.resetHeightReactionDisposer&&this.resetHeightReactionDisposer(),clearTimeout(this.clearCollectionLoadingTimer)}getSidebarEmptyState(){const t=Object(v.getStore)("ActiveWorkspacePermissionStore"),i=t&&t.permissions,n=e.get(i,f.WORKSPACE_PERMISSIONS.ADD_ENVIRONMENT_TO_WORKSPACE,!0);return a.a.createElement(R.default,{illustration:a.a.createElement(p.IllustrationNoEnvironment,null),title:"您没有任何环境.",message:"环境是一组变量,允许您切换请求的上下文.",action:n&&{label:"创建环境",handler:g.createEnvironment}})}getGlobalsListItem(){return a.a.createElement(b.default,{identifier:"globals"},a.a.createElement(S.default,{model:this.props.model.globals}))}getItemSize(){return 28}getKeyMapHandlers(){return{quit:pm.shortcuts.handle("quit",this.setEditCache.bind(this,null)),select:pm.shortcuts.handle("select",this.saveCachedValue),nextItem:pm.shortcuts.handle("nextItem",this.focusNext),prevItem:pm.shortcuts.handle("prevItem",this.focusPrev),delete:pm.shortcuts.handle("delete",this.deleteItem),rename:pm.shortcuts.handle("rename",this.renameItem),duplicate:pm.shortcuts.handle("duplicate",this.duplicateItem)}}setEditCache(e){this.editCache=e}saveCachedValue(){if(!this.editCache)return;const{index:t,inlineInput:i}=this.editCache,n=e.get(this.props.model,["items",t]),s=(a=i,e.get(a,"inlineInput.value"));var a;n&&!e.isNil(s)&&this.props.model.handleAction(n.id,A.ACTION_TYPE_RENAME,{name:s})}focusNext(e){e&&e.preventDefault(),this.props.model.focusNext()}focusPrev(e){e&&e.preventDefault(),this.props.model.focusPrev()}deleteItem(){this.props.model.handleAction(e.get(this.props.model,"activeItem"),A.ACTION_TYPE_DELETE)}renameItem(){if(!Object(v.getStore)("OnlineStatusStore").userCanSave)return Object(O.showOfflineActionDisabledToast)();e.invoke(this.listItemRefs,[e.get(this.props.model,"activeItem"),"handleEditName"])}duplicateItem(){this.props.model.handleAction(e.get(this.props.model,"activeItem"),A.ACTION_TYPE_DUPLICATE)}handleClickOutside(e){const t="input input-box inline-input"===(e&&e.target&&e.target.className);this.editCache&&!t&&this.saveCachedValue()}scrollToItem(t){!e.isEmpty(this.listRef)&&!e.isNil(t)&&this.listRef.scrollToItem(t)}render(){const{model:t}=this.props,i=e.size(t.items);if(t.isLoading)return a.a.createElement("div",{className:"env-sidebar-list-container"},this.getGlobalsListItem(),a.a.createElement(_.default,null));if(e.isEmpty(t.items)){if(e.isEmpty(t.searchQuery))return a.a.createElement("div",{className:"env-sidebar-list-container"},this.getGlobalsListItem(),this.getSidebarEmptyState());if(!T.GLOBALS.includes(t.searchQuery))return a.a.createElement(N.default,{searchQuery:t.searchQuery,illustration:a.a.createElement(p.IllustrationNoEnvironment,null)})}const n={model:this.props.model,setEditCache:this.setEditCache,editCache:this.editCache,listItemRefs:this.listItemRefs};return a.a.createElement(E.default,{keyMap:pm.shortcuts.getShortcuts(),handlers:this.getKeyMapHandlers()},a.a.createElement("div",{className:"env-sidebar-list-container",onClick:this.handleClickOutside},this.getGlobalsListItem(),a.a.createElement("div",{className:"env-sidebar-list"},a.a.createElement(m.default,null,(({height:e,width:t})=>a.a.createElement(u.VariableSizeList,{height:e,itemData:n,width:t,itemCount:i,itemSize:this.getItemSize,itemKey:y,overscanCount:10,ref:e=>{this.listRef=e}},x))))))}})||n)||n;D.propTypes={model:o.a.instanceOf(C.default).isRequired}}.call(this,i(2753))},24772:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return A}));var n,s=i(2),a=i.n(s),r=i(2353),o=i(2825),l=i.n(o),c=i(2756),d=i.n(c),h=i(9),m=i(24584),u=i(5929),p=i(8908),E=i(7124),v=i(7321),b=i(6367),f=i(9758),I=i(6354),S=i(9567),C=i(8646),g=i(6732),O=i(8759);let A=Object(r.observer)(n=class extends s.Component{constructor(e){super(e),this.handleEditName=this.handleEditName.bind(this),this.handleItemSelect=this.handleItemSelect.bind(this),this.handleRenameSubmit=this.handleRenameSubmit.bind(this),this.handleSetActiveEnvironment=this.handleSetActiveEnvironment.bind(this),this.handleRemoveActiveEnvironment=this.handleRemoveActiveEnvironment.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.containerRef=this.containerRef.bind(this),this.getStatusIndicators=this.getStatusIndicators.bind(this),this.getDisabledText=this.getDisabledText.bind(this)}componentDidMount(){this.props.editCache&&this.listItemRef&&(this.handleEditName(),this.listItemRef.setEditState(this.props.editCache.inlineInput))}componentWillUnmount(){const{listItemRef:e}=this;e&&e.isEditing()&&this.props.setEditCache({index:this.props.index,inlineInput:e.getEditState()})}getStatusIndicators(){return a.a.createElement(f.default,{environment:this.props.item,showForkLabel:!0})}getRightAlignedContainer(e,t){const i=l()({"env-actions-icon-container":!0,isHovered:e||t,isActive:this.props.item.isActive});return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:i},a.a.createElement(E.Button,{type:"icon",tooltip:"设为非活动",onClick:this.handleRemoveActiveEnvironment,className:"sidebar-action-btn active-env-icon"},a.a.createElement(h.Icon,{name:"icon-state-success-fill-small",size:"large",color:"content-color-primary"})),a.a.createElement(E.Button,{type:"icon",tooltip:"设为活动",onClick:this.handleSetActiveEnvironment,className:"sidebar-action-btn inactive-env-icon"},a.a.createElement(h.Icon,{name:"icon-state-success-stroke",size:"large",color:"content-color-primary"}))),!e&&!t&&this.props.item.isActive&&a.a.createElement("div",{className:"env-actions__more-actions-placeholder"}))}getDisabledText(t,i){if(!t)return;if(!Object(u.getStore)("OnlineStatusStore").userCanSave)return O.DISABLED_TOOLTIP_IS_OFFLINE;const n=O.DISABLED_TOOLTIP_NO_PERMISSION,s=Object(u.getStore)("ActiveWorkspacePermissionStore"),a=s&&s.permissions;switch(i){case S.ACTION_MANAGE_ROLES:{const{team:e}=Object(u.getStore)("CurrentUserStore"),t=Object(u.getStore)("ActiveWorkspaceStore");return e||t.visibilityStatus===I.VISIBILITY_STATUS.public?n:"You need to be signed-in to a team to perform this action"}case S.ACTION_REMOVE_FROM_WORKSPACE:return e.get(a,b.WORKSPACE_PERMISSIONS.REMOVE_ENVIRONMENT_FROM_WORKSPACE,!0)?"Get online to perform this action":n;case S.ACTION_TYPE_PULL_REQUEST:case S.ACTION_TYPE_MERGE:return"Coming soon in a future release!";default:return n}}getMenuItemIconClasses(e){return l()({"dropdown-menu-item-icon":!0},{"pm-icon":!0},{"pm-icon-normal":!0},`menu-icon--${e}`)}getMenuItems(){const{model:t,item:i}=this.props;return e.map(t.getActions(i.id),(e=>{const t=a.a.createElement("span",{className:"env-action-item"},a.a.createElement("div",{className:"dropdown-menu-item-label"},e.label),e.shortcut&&a.a.createElement("div",{className:"dropdown-menu-item-shortcut"},Object(p.getShortcutByName)(e.shortcut)));return!e.hide&&a.a.createElement(C.MenuItem,{key:e.type,refKey:e.type,disabled:!e.isEnabled,disabledText:this.getDisabledText(!e.isEnabled,e.type)},e.xpathLabel?a.a.createElement(v.default,{identifier:e.xpathLabel},t):t)}))}getActionsMenuItems(){return a.a.createElement(C.DropdownMenu,{className:"env-dropdown-menu","align-right":!0},this.getMenuItems())}containerRef(e){this.listItemRef=e}handleSetActiveEnvironment(){this.props.model.handleAction(this.props.item.id,S.ACTION_TYPE_SET_ACTIVE)}handleRemoveActiveEnvironment(){this.props.model.handleAction(this.props.item.id,S.ACTION_TYPE_SET_ACTIVE,{noEnvironment:!0})}handleEditName(){e.invoke(this.listItemRef,"editText")}async handleRenameSubmit(e){await this.props.model.handleAction(this.props.item.id,S.ACTION_TYPE_RENAME,{name:e}),this.props.setEditCache(null)}async handleDropdownActionSelect(e){if(e===S.ACTION_TYPE_RENAME_TOGGLE)return Object(u.getStore)("OnlineStatusStore").userCanSave?this.handleEditName():Object(g.showOfflineActionDisabledToast)();await this.props.model.handleAction(this.props.item.id,e)}handleItemSelect(){this.props.model.openInTab(this.props.item.id)}render(){const{item:t,model:i}=this.props;return a.a.createElement(m.default,{ref:this.containerRef,text:t.name,isForked:!(!e.get(t,"attributes.fork.forkId")&&!e.get(t,"attributes.fork.id")),isSelected:i.activeItem===t.id,onClick:this.handleItemSelect,onRename:this.handleRenameSubmit,statusIndicators:this.getStatusIndicators,rightMetaComponent:(...e)=>a.a.createElement(r.Observer,null,this.getRightAlignedContainer.bind(this,...e)),moreActions:this.getActionsMenuItems(),onActionsDropdownSelect:this.handleDropdownActionSelect})}})||n;A.propTypes={index:d.a.number.isRequired,item:d.a.object.isRequired,model:d.a.object.isRequired,editCache:d.a.object.isRequired,setEditCache:d.a.func.isRequired}}.call(this,i(2753))},24773:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return u}));var n,s=i(2),a=i.n(s),r=i(2353),o=i(2825),l=i.n(o),c=i(2756),d=i.n(c),h=i(24584),m=i(24774);let u=Object(r.observer)(n=class extends s.Component{constructor(e){super(e),this.handleSelect=this.handleSelect.bind(this)}getItemClasses(){return l()({"globals-sidebar-list-item":!0,selected:this.props.model.isActive})}handleSelect(){this.props.model.openInTab()}render(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(h.default,{text:"全局",isSelected:this.props.model.isActive,onClick:this.handleSelect}),a.a.createElement("div",{className:"globals-separator"}))}})||n;u.propTypes={model:d.a.instanceOf(m.GlobalsModel).isRequired}}}]);