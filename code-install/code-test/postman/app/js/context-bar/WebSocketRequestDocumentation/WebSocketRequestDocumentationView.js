(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{"./runtime-repl/request-websocket/base/context-bar/WebSocketRequestDocumentation/WebSocketRequestDocumentationView.js":function(e,t,s){"use strict";s.r(t),function(e){s.d(t,"default",(function(){return q}));var n,o=s("../../node_modules/react/index.js"),a=s.n(o),i=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=s("./node_modules/classnames/index.js"),r=s.n(c),l=s("../../node_modules/@postman/aether/esmLib/index.js"),d=s("./js/components/base/keymaps/KeyMaps.js"),m=s("./appsdk/contextbar/ContextBarViewHeader.js"),u=s("./documentation/components/DocumentationIntersectionObserver/index.js"),p=s("../../packages/documentation/documentation-core/index.js"),g=s("./runtime-repl/extensible-collection/api/ExtensibleCollectionItemAPI.ts"),b=s.n(g),E=s("./runtime-repl/_common/DisabledTooltipConstants.js"),y=s("./runtime-repl/extensible-collection/types/ExtensibleCollectionItemTypes.ts"),h=s("./runtime-repl/request-websocket/socketio/constants/SocketIOConstants.js"),k=s("./runtime-repl/request-websocket/socketio/context-bar/SocketIOMessagesDocumentation/SocketIOMessagesDocumentation.js"),_=s("./runtime-repl/request-websocket/base/api/WebSocketRequestAPI.ts"),S=s.n(_),I=s("./runtime-repl/request-websocket/base/types/WebSocketRequestTypes.ts"),x=s("./runtime-repl/request-websocket/base/constants/WebSocketRequestConstants.js"),w=s("./runtime-repl/request-websocket/raw/context-bar/RawWebSocketMessagesDocumentation/RawWebSocketMessagesDocumentation.js");function T(e){const[t,s]=Object(o.useState)(!1),{online:n,permission:i}=S.a.canExecuteAction(I.WebSocketRequestUIAction.SAVE,{checkOnlineStatus:!0,checkPermission:!0,verbose:!0,showAlert:!1}),c=t=>{s(t),e.onDescriptionEditToggle(t)},l=t=>{S.a.update({id:e.requestId,extensions:{documentation:{content:t}}}).then((()=>c(!1))).catch((e=>{pm.logger.error("WebSocketRequestDocumentationView~onSaveDescription",e),pm.toasts.error("保存请求描述时出错.")}))},m=()=>c(!1);return a.a.createElement(d.default,{keyMap:pm.shortcuts.getShortcuts(),handlers:{submit:l,quit:m}},a.a.createElement("div",{className:r()({"websocket-request-description":!0,"websocket-request-description--edit":t})},t&&n?a.a.createElement(p.DescriptionEditor,{entityType:"request",description:e.description,onCancel:m,onSave:l,placeholder:"使用完整的请求描述, 让您的队友更轻松."}):a.a.createElement("div",null,a.a.createElement(p.DescriptionPreview,{entityType:"request",description:e.description,onEditButtonClick:()=>c(!0),editable:n,canEdit:i,showEmptyPlaceholder:!0,tooltip:n?i?null:E.DISABLED_TOOLTIP_NO_PERMISSION:E.DISABLED_TOOLTIP_IS_OFFLINE}))))}let q=Object(i.observer)(n=class extends a.a.Component{constructor(e){super(e),this.state={descriptionEditMode:!1},this.onDescriptionEditToggle=this.onDescriptionEditToggle.bind(this)}onDescriptionEditToggle(e){this.setState({descriptionEditMode:e})}getSettings(t){let s,n=[];switch(t.type){case y.ItemType.WS_RAW_REQUEST:s=x.WS_CONNECTION_CONFIG;break;case y.ItemType.WS_SOCKETIO_REQUEST:s=h.SOCKETIO_CONNECTION_CONFIG,n=["version","path"]}return s?e.reduce(s,((s,o)=>{const a=o.id;let i=e.get(t,["payload","settings",a]);if(e.isNil(i)){if(e.isNil(o.defaultValue)||!e.includes(n,a))return s;i=o.defaultValue}return"dropdown"===o.inputFieldType&&o.menuLabels&&(i=o.menuLabels[e.findIndex(o.menuOptions,(e=>e===i))]||i),s.push({key:o.title,value:String(i),description:o.summary}),s}),[]):[]}renderMessages(e){switch(e.type){case y.ItemType.WS_RAW_REQUEST:return a.a.createElement(w.default,{requestId:e.id});case y.ItemType.WS_SOCKETIO_REQUEST:return a.a.createElement(k.default,{requestId:e.id});default:return null}}render(){const t=b.a.cacheAPI.get(this.props.contextData.requestId),s=e.get(t,"payload.url");return t?a.a.createElement(a.a.Fragment,null,a.a.createElement(m.ContextBarViewHeader,{title:"文档",onClose:this.props.onClose}),a.a.createElement(u.default,null,(({rootRef:n})=>a.a.createElement("div",{ref:n,className:"websocket-request-documentation"},a.a.createElement("div",{className:"websocket-request-documentation__body"},a.a.createElement(T,{requestId:t.id,description:e.get(t,"extensions.documentation.content"),onDescriptionEditToggle:this.onDescriptionEditToggle}),!this.state.descriptionEditMode&&a.a.createElement(a.a.Fragment,null,s&&a.a.createElement("div",{className:"websocket-request-documentation__body__url"},a.a.createElement(l.Heading,{type:"h3",text:"URL"}),a.a.createElement("div",{className:"request-documentation--url"},a.a.createElement(p.URLComponent,{request:{url:s}}))),a.a.createElement(p.KeyValueDescriptionTable,{title:"查询参数",items:e.get(t,"payload.queryParams"),hideEmptyBody:!0}),a.a.createElement(p.KeyValueDescriptionTable,{title:"Header",items:e.get(t,"payload.headers"),hideEmptyBody:!0}),a.a.createElement(p.KeyValueDescriptionTable,{title:"设置",items:this.getSettings(t),hideEmptyBody:!0}),this.renderMessages(t))))))):null}})||n}.call(this,s("./node_modules/lodash/lodash.js"))},"./runtime-repl/request-websocket/raw/context-bar/RawWebSocketMessagesDocumentation/RawWebSocketMessagesDocumentation.js":function(e,t,s){"use strict";s.r(t),function(e){var n=s("../../node_modules/react/index.js"),o=s.n(n),a=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),i=s("../../node_modules/@postman/aether/esmLib/index.js"),c=s("../../packages/documentation/documentation-core/index.js"),r=s("./runtime-repl/extensible-collection/api/ExtensibleCollectionItemAPI.ts"),l=s.n(r),d=s("./runtime-repl/extensible-collection/types/ExtensibleCollectionItemTypes.ts"),m=s("./runtime-repl/request-websocket/base/constants/WebSocketRequestConstants.js"),u=s("./runtime-repl/request-websocket/base/types/WebSocketMessageTypes.ts");const p=Object(a.observer)((t=>{const s=e.filter(e.get(l.a.cacheAPI.get(t.requestId),"childrenItems"),(e=>e.type===d.ItemType.WS_RAW_MESSAGE));return e.isEmpty(s)?null:o.a.createElement("div",{className:"raw-websocket-messages-documentation"},o.a.createElement(i.Heading,{type:"h3",text:"消息",color:"content-color-primary"}),e.map(s,(e=>{if(!e||!e.payload)return null;const{type:t,subtype:s,content:n}=e.payload,a=t===u.WebSocketMessageBodyType.BINARY?s:t;return o.a.createElement("div",{className:"raw-websocket-messages-documentation__item",key:e.id},o.a.createElement(i.Heading,{type:"h6",text:e.title,hasBottomSpacing:!0,color:"content-color-primary",isTruncated:!0}),o.a.createElement(c.EnhancedCode,{name:e.title,body:n,language:a,selectedLanguage:m.USER_FRIENDLY_LANGUAGE_NAME[a],highlightSyntaxByDefault:!0,className:"highlighted-code--documentation",enableClickToExpand:!0}))})))}));t.default=p}.call(this,s("./node_modules/lodash/lodash.js"))},"./runtime-repl/request-websocket/socketio/context-bar/SocketIOMessagesDocumentation/SocketIOMessagesDocumentation.js":function(e,t,s){"use strict";s.r(t),function(e){var n=s("../../node_modules/react/index.js"),o=s.n(n),a=s("./node_modules/classnames/index.js"),i=s.n(a),c=s("../../node_modules/mobx-react/dist/mobx-react.module.js"),r=s("../../node_modules/@postman/aether/esmLib/index.js"),l=s("../../packages/documentation/documentation-core/index.js"),d=s("./runtime-repl/extensible-collection/api/ExtensibleCollectionItemAPI.ts"),m=s.n(d),u=s("./runtime-repl/extensible-collection/types/ExtensibleCollectionItemTypes.ts"),p=s("./runtime-repl/request-websocket/base/constants/WebSocketRequestConstants.js"),g=s("./runtime-repl/request-websocket/socketio/workbench/components/MultiArgMessageEditor/MultiArgMessageEditor.js"),b=s("./runtime-repl/request-websocket/base/types/WebSocketMessageTypes.ts");function E(e){const[t,s]=Object(n.useState)(0),{message:a}=e;if(!a||!a.payload)return null;const{args:c}=a.payload;return o.a.createElement("div",{className:"socketio-messages-documentation__event__snippet",key:a.id},o.a.createElement(r.Heading,{type:"h6",text:a.title,hasBottomSpacing:!0,color:"content-color-secondary",isTruncated:!0}),o.a.createElement(g.default,{args:c,activeArg:t,onActiveArgChange:e=>s(e),className:"socketio-messages-documentation__event__snippet__multi-arg",readOnly:!0,renderMessageContent:e=>{const{type:t,subtype:s,content:n}=c[e],r=t===b.WebSocketMessageBodyType.BINARY?s:t;return o.a.createElement(l.EnhancedCode,{name:a.title,body:n,language:r,selectedLanguage:p.USER_FRIENDLY_LANGUAGE_NAME[r],highlightSyntaxByDefault:!0,className:i()({"socketio-messages-documentation__event__snippet__code":!0,"highlighted-code--documentation":!0})})}}))}const y=Object(c.observer)((t=>{const s=m.a.cacheAPI.get(t.requestId),n=e.get(s,"payload.events"),a=e.filter(s.childrenItems,(e=>e.type===u.ItemType.WS_SOCKETIO_MESSAGE));if(e.isEmpty(a)&&e.isEmpty(n))return null;let i=e.reduce(n,((e,t)=>(t&&t.name&&(e[t.name]={description:t.description,messages:[]}),e)),{});const c=[];return i=e.reduce(a,((e,t)=>{if(!t||!t.payload)return e;const{eventName:s="message"}=t.payload;return"message"!==s||e[s]?(!e[s]&&(e[s]={messages:[]}),e[s].messages.push(t),e):(c.push(t),e)}),i),c.length&&(i.message={messages:c}),o.a.createElement("div",{className:"socketio-messages-documentation"},o.a.createElement(r.Heading,{type:"h3",text:"事件",color:"content-color-primary"}),e.map(i,(({description:t,messages:s},n)=>o.a.createElement("div",{className:"socketio-messages-documentation__event",key:n},o.a.createElement(r.Heading,{type:"h4",text:n,color:"content-color-primary",isTruncated:!0}),t&&o.a.createElement(r.Text,{type:"body-medium",color:"content-color-primary"},t),!e.isEmpty(s)&&e.map(s,(e=>o.a.createElement(E,{key:e.id,message:e})))))))}));t.default=y}.call(this,s("./node_modules/lodash/lodash.js"))}}]);