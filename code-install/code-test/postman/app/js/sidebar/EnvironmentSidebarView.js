(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{"./runtime-repl/environment/sidebar/EnvironmentSidebarContainer/EnvironmentSidebarContainer.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var s,i=n("../../node_modules/react/index.js"),o=n.n(i),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/components/base/XPaths/XPath.js"),m=n("./runtime-repl/environment/sidebar/EnvironmentSidebarMenu/EnvironmentSidebarMenu.js"),c=n("./runtime-repl/environment/sidebar/EnvironmentSidebarListContainer/EnvironmentSidebarListContainer.js"),h=n("./runtime-repl/environment/sidebar/EnvironmentSidebarModel.js");let u=Object(l.observer)(s=class extends i.Component{render(){return o.a.createElement("div",{className:"env-sidebar-container"},o.a.createElement(m.default,{model:this.props.model}),o.a.createElement(d.default,{identifier:"environment"},o.a.createElement(c.default,{model:this.props.model})))}})||s;u.propTypes={model:a.a.instanceOf(h.default).isRequired}},"./runtime-repl/environment/sidebar/EnvironmentSidebarListContainer/EnvironmentSidebarListContainer.js":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return y}));var s,i=n("../../node_modules/react/index.js"),o=n.n(i),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("../../node_modules/mobx/lib/mobx.module.js"),d=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),m=n("./node_modules/@postman/react-click-outside/dist/index.js"),c=n.n(m),h=n("./node_modules/react-virtualized-auto-sizer/dist/index.esm.js"),u=n("./node_modules/react-window/dist/index.esm.js"),p=n("../../node_modules/@postman/aether/esmLib/index.js"),b=n("./js/components/base/keymaps/KeyMaps.js"),E=n("./js/stores/get-store.js"),v=n("./js/components/base/XPaths/XPath.js"),S=n("./collaboration/workspace/types/PermissionTypes.ts"),I=n("./runtime-repl/environment/sidebar/EnvironmentSidebarListItem/EnvironmentSidebarListItem.js"),f=n("./runtime-repl/globals/sidebar/GlobalsSidebarListItem/GlobalsSidebarListItem.js"),j=n("./runtime-repl/environment/sidebar/EnvironmentSidebarModel.js"),C=n("./runtime-repl/environment/_api/EnvironmentInterface.js"),g=n("./runtime-repl/_common/ToastHelpers.js"),_=n("./runtime-repl/environment/EnvironmentActionsConstant.js"),O=n("./runtime-repl/_common/ModelConstant.js"),T=n("./appsdk/sidebar/SidebarEmptyState/SidebarEmptyState.js"),A=n("./appsdk/sidebar/SidebarNoResultsFound/SidebarNoResultsFound.js"),R=n("./appsdk/sidebar/SidebarLoadingState/SidebarLoadingState.js");const x=(t,n)=>{const{model:s}=n,i=e.get(s,["items",t]);if(!i)return"0";const{id:o}=i;return o},N=Object(d.observer)((({index:t,data:n,style:s})=>{const{model:i}=n,r=e.get(i,["items",t]);if(!r)return null;const{id:a}=r;return o.a.createElement(v.default,{identifier:a},o.a.createElement("div",{style:s},o.a.createElement(I.default,{ref:e=>{n.listItemRefs[a]=e},key:a,index:t,item:r,model:i,setEditCache:n.setEditCache,editCache:e.get(n.editCache,"index")===t?n.editCache:null})))}));let y=c()(s=Object(d.observer)(s=class extends i.Component{constructor(e){super(e),this.editCache=null,this.listItemRefs={},this.getItemSize=this.getItemSize.bind(this),this.scrollToItem=this.scrollToItem.bind(this),this.setEditCache=this.setEditCache.bind(this),this.saveCachedValue=this.saveCachedValue.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.focusNext=this.focusNext.bind(this),this.focusPrev=this.focusPrev.bind(this),this.deleteItem=this.deleteItem.bind(this),this.renameItem=this.renameItem.bind(this),this.duplicateItem=this.duplicateItem.bind(this)}componentDidMount(){this.scrollToViewReactionDisposer=Object(l.reaction)((()=>e.get(this.props,"model.activeItemIndex")),(e=>this.scrollToItem(e))),this.resetHeightReactionDisposer=Object(l.reaction)((()=>e.get(this.props,"model.items")),(()=>{this.listRef&&this.listRef.resetAfterIndex(0)}))}componentWillUnmount(){this.scrollToViewReactionDisposer&&this.scrollToViewReactionDisposer(),this.resetHeightReactionDisposer&&this.resetHeightReactionDisposer(),clearTimeout(this.clearCollectionLoadingTimer)}getSidebarEmptyState(){const t=Object(E.getStore)("ActiveWorkspacePermissionStore"),n=t&&t.permissions,s=e.get(n,S.WORKSPACE_PERMISSIONS.ADD_ENVIRONMENT_TO_WORKSPACE,!0);return o.a.createElement(T.default,{illustration:o.a.createElement(p.IllustrationNoEnvironment,null),title:"您没有任何环境.",message:"环境是一组变量,允许您切换请求的上下文.",action:s&&{label:"创建环境",handler:C.createEnvironment}})}getGlobalsListItem(){return o.a.createElement(v.default,{identifier:"globals"},o.a.createElement(f.default,{model:this.props.model.globals}))}getItemSize(){return 28}getKeyMapHandlers(){return{quit:pm.shortcuts.handle("quit",this.setEditCache.bind(this,null)),select:pm.shortcuts.handle("select",this.saveCachedValue),nextItem:pm.shortcuts.handle("nextItem",this.focusNext),prevItem:pm.shortcuts.handle("prevItem",this.focusPrev),delete:pm.shortcuts.handle("delete",this.deleteItem),rename:pm.shortcuts.handle("rename",this.renameItem),duplicate:pm.shortcuts.handle("duplicate",this.duplicateItem)}}setEditCache(e){this.editCache=e}saveCachedValue(){if(!this.editCache)return;const{index:t,inlineInput:n}=this.editCache,s=e.get(this.props.model,["items",t]),i=(o=n,e.get(o,"inlineInput.value"));var o;s&&!e.isNil(i)&&this.props.model.handleAction(s.id,_.ACTION_TYPE_RENAME,{name:i})}focusNext(e){e&&e.preventDefault(),this.props.model.focusNext()}focusPrev(e){e&&e.preventDefault(),this.props.model.focusPrev()}deleteItem(){this.props.model.handleAction(e.get(this.props.model,"activeItem"),_.ACTION_TYPE_DELETE)}renameItem(){if(!Object(E.getStore)("OnlineStatusStore").userCanSave)return Object(g.showOfflineActionDisabledToast)();e.invoke(this.listItemRefs,[e.get(this.props.model,"activeItem"),"handleEditName"])}duplicateItem(){this.props.model.handleAction(e.get(this.props.model,"activeItem"),_.ACTION_TYPE_DUPLICATE)}handleClickOutside(e){const t="input input-box inline-input"===(e&&e.target&&e.target.className);this.editCache&&!t&&this.saveCachedValue()}scrollToItem(t){!e.isEmpty(this.listRef)&&!e.isNil(t)&&this.listRef.scrollToItem(t)}render(){const{model:t}=this.props,n=e.size(t.items);if(t.isLoading)return o.a.createElement("div",{className:"env-sidebar-list-container"},this.getGlobalsListItem(),o.a.createElement(R.default,null));if(e.isEmpty(t.items)){if(e.isEmpty(t.searchQuery))return o.a.createElement("div",{className:"env-sidebar-list-container"},this.getGlobalsListItem(),this.getSidebarEmptyState());if(!O.GLOBALS.includes(t.searchQuery))return o.a.createElement(A.default,{searchQuery:t.searchQuery,illustration:o.a.createElement(p.IllustrationNoEnvironment,null)})}const s={model:this.props.model,setEditCache:this.setEditCache,editCache:this.editCache,listItemRefs:this.listItemRefs};return o.a.createElement(b.default,{keyMap:pm.shortcuts.getShortcuts(),handlers:this.getKeyMapHandlers()},o.a.createElement("div",{className:"env-sidebar-list-container",onClick:this.handleClickOutside},this.getGlobalsListItem(),o.a.createElement("div",{className:"env-sidebar-list"},o.a.createElement(h.default,null,(({height:e,width:t})=>o.a.createElement(u.VariableSizeList,{height:e,itemData:s,width:t,itemCount:n,itemSize:this.getItemSize,itemKey:x,overscanCount:10,ref:e=>{this.listRef=e}},N))))))}})||s)||s;y.propTypes={model:a.a.instanceOf(j.default).isRequired}}.call(this,n("./node_modules/lodash/lodash.js"))},"./runtime-repl/environment/sidebar/EnvironmentSidebarListItem/EnvironmentSidebarListItem.js":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return _}));var s,i=n("../../node_modules/react/index.js"),o=n.n(i),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),d=n("./node_modules/prop-types/index.js"),m=n.n(d),c=n("../../node_modules/@postman/aether/esmLib/index.js"),h=n("./js/containers/apps/requester/sidebar/SidebarListItem.js"),u=n("./js/stores/get-store.js"),p=n("./js/controllers/ShortcutsList.js"),b=n("./js/components/base/Buttons.js"),E=n("./js/components/base/XPaths/XPath.js"),v=n("./collaboration/workspace/types/PermissionTypes.ts"),S=n("./runtime-repl/environment/workbench/EnvironmentMetaIcons.js"),I=n("./collaboration/workspace/types/WorkspaceTypes.ts"),f=n("./runtime-repl/environment/EnvironmentActionsConstant.js"),j=n("./runtime-repl/_common/components/molecule.js"),C=n("./runtime-repl/_common/ToastHelpers.js"),g=n("./runtime-repl/_common/DisabledTooltipConstants.js");let _=Object(r.observer)(s=class extends i.Component{constructor(e){super(e),this.handleEditName=this.handleEditName.bind(this),this.handleItemSelect=this.handleItemSelect.bind(this),this.handleRenameSubmit=this.handleRenameSubmit.bind(this),this.handleSetActiveEnvironment=this.handleSetActiveEnvironment.bind(this),this.handleRemoveActiveEnvironment=this.handleRemoveActiveEnvironment.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.containerRef=this.containerRef.bind(this),this.getStatusIndicators=this.getStatusIndicators.bind(this),this.getDisabledText=this.getDisabledText.bind(this)}componentDidMount(){this.props.editCache&&this.listItemRef&&(this.handleEditName(),this.listItemRef.setEditState(this.props.editCache.inlineInput))}componentWillUnmount(){const{listItemRef:e}=this;e&&e.isEditing()&&this.props.setEditCache({index:this.props.index,inlineInput:e.getEditState()})}getStatusIndicators(){return o.a.createElement(S.default,{environment:this.props.item,showForkLabel:!0})}getRightAlignedContainer(e,t){const n=l()({"env-actions-icon-container":!0,isHovered:e||t,isActive:this.props.item.isActive});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:n},o.a.createElement(b.Button,{type:"icon",tooltip:"设为非活动",onClick:this.handleRemoveActiveEnvironment,className:"sidebar-action-btn active-env-icon"},o.a.createElement(c.Icon,{name:"icon-state-success-fill-small",size:"large",color:"content-color-primary"})),o.a.createElement(b.Button,{type:"icon",tooltip:"设为活动",onClick:this.handleSetActiveEnvironment,className:"sidebar-action-btn inactive-env-icon"},o.a.createElement(c.Icon,{name:"icon-state-success-stroke",size:"large",color:"content-color-primary"}))),!e&&!t&&this.props.item.isActive&&o.a.createElement("div",{className:"env-actions__more-actions-placeholder"}))}getDisabledText(t,n){if(!t)return;if(!Object(u.getStore)("OnlineStatusStore").userCanSave)return g.DISABLED_TOOLTIP_IS_OFFLINE;const s=g.DISABLED_TOOLTIP_NO_PERMISSION,i=Object(u.getStore)("ActiveWorkspacePermissionStore"),o=i&&i.permissions;switch(n){case f.ACTION_MANAGE_ROLES:{const{team:e}=Object(u.getStore)("CurrentUserStore"),t=Object(u.getStore)("ActiveWorkspaceStore");return e||t.visibilityStatus===I.VISIBILITY_STATUS.public?s:"您需要登录到一个团队才能执行此操作"}case f.ACTION_REMOVE_FROM_WORKSPACE:return e.get(o,v.WORKSPACE_PERMISSIONS.REMOVE_ENVIRONMENT_FROM_WORKSPACE,!0)?"联网以执行此操作":s;case f.ACTION_TYPE_PULL_REQUEST:case f.ACTION_TYPE_MERGE:return"即将在未来的版本中发布!";default:return s}}getMenuItemIconClasses(e){return l()({"dropdown-menu-item-icon":!0},{"pm-icon":!0},{"pm-icon-normal":!0},`menu-icon--${e}`)}getMenuItems(){const{model:t,item:n}=this.props;return e.map(t.getActions(n.id),(e=>{const t=o.a.createElement("span",{className:"env-action-item"},o.a.createElement("div",{className:"dropdown-menu-item-label"},e.label),e.shortcut&&o.a.createElement("div",{className:"dropdown-menu-item-shortcut"},Object(p.getShortcutByName)(e.shortcut)));return!e.hide&&o.a.createElement(j.MenuItem,{key:e.type,refKey:e.type,disabled:!e.isEnabled,disabledText:this.getDisabledText(!e.isEnabled,e.type)},e.xpathLabel?o.a.createElement(E.default,{identifier:e.xpathLabel},t):t)}))}getActionsMenuItems(){return o.a.createElement(j.DropdownMenu,{className:"env-dropdown-menu","align-right":!0},this.getMenuItems())}containerRef(e){this.listItemRef=e}handleSetActiveEnvironment(){this.props.model.handleAction(this.props.item.id,f.ACTION_TYPE_SET_ACTIVE)}handleRemoveActiveEnvironment(){this.props.model.handleAction(this.props.item.id,f.ACTION_TYPE_SET_ACTIVE,{noEnvironment:!0})}handleEditName(){e.invoke(this.listItemRef,"editText")}async handleRenameSubmit(e){await this.props.model.handleAction(this.props.item.id,f.ACTION_TYPE_RENAME,{name:e}),this.props.setEditCache(null)}async handleDropdownActionSelect(e){if(e===f.ACTION_TYPE_RENAME_TOGGLE)return Object(u.getStore)("OnlineStatusStore").userCanSave?this.handleEditName():Object(C.showOfflineActionDisabledToast)();await this.props.model.handleAction(this.props.item.id,e)}handleItemSelect(){this.props.model.openInTab(this.props.item.id)}render(){const{item:t,model:n}=this.props;return o.a.createElement(h.default,{ref:this.containerRef,text:t.name,isForked:!(!e.get(t,"attributes.fork.forkId")&&!e.get(t,"attributes.fork.id")),isSelected:n.activeItem===t.id,onClick:this.handleItemSelect,onRename:this.handleRenameSubmit,statusIndicators:this.getStatusIndicators,rightMetaComponent:(...e)=>o.a.createElement(r.Observer,null,this.getRightAlignedContainer.bind(this,...e)),moreActions:this.getActionsMenuItems(),onActionsDropdownSelect:this.handleDropdownActionSelect})}})||s;_.propTypes={index:m.a.number.isRequired,item:m.a.object.isRequired,model:m.a.object.isRequired,editCache:m.a.object.isRequired,setEditCache:m.a.func.isRequired}}.call(this,n("./node_modules/lodash/lodash.js"))},"./runtime-repl/environment/sidebar/EnvironmentSidebarMenu/EnvironmentSidebarMenu.js":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return h}));var s,i=n("../../node_modules/react/index.js"),o=n.n(i),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./js/stores/get-store.js"),l=n("./js/containers/apps/requester/sidebar/SidebarListActions.js"),d=n("./collaboration/workspace/types/PermissionTypes.ts"),m=n("./runtime-repl/environment/_api/EnvironmentInterface.js"),c=n("./runtime-repl/_common/DisabledTooltipConstants.js");let h=Object(r.observer)(s=class extends i.Component{constructor(e){super(e),this.state={isEnvCreateEnabled:!0},this.handleCreate=this.handleCreate.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}handleCreate(){this.setState({isEnvCreateEnabled:!1}),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.setState({isEnvCreateEnabled:!0})}),1e3),Object(m.createEnvironment)({openInTab:!0})}handleSearchChange(e){this.props.model&&this.props.model.setSearchQuery(e)}render(){const{userCanSave:t}=Object(a.getStore)("OnlineStatusStore"),n=Object(a.getStore)("ActiveWorkspacePermissionStore"),s=n&&n.permissions,i=e.get(s,d.WORKSPACE_PERMISSIONS.ADD_ENVIRONMENT_TO_WORKSPACE,!0),r=t&&i&&this.state.isEnvCreateEnabled;return o.a.createElement(l.default,{createNewConfig:{tooltip:t?i?"创建新的环境":c.DISABLED_TOOLTIP_NO_PERMISSION:c.DISABLED_TOOLTIP_IS_OFFLINE,disabled:!r,onCreate:this.handleCreate,xPathIdentifier:"addEnvironment"},onSearch:this.handleSearchChange,searchQuery:this.props.model.searchQuery})}})||s}.call(this,n("./node_modules/lodash/lodash.js"))},"./runtime-repl/environment/sidebar/EnvironmentSidebarView.js":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return u}));var s,i=n("../../node_modules/react/index.js"),o=n.n(i),r=n("./node_modules/prop-types/index.js"),a=n.n(r),l=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),d=n("./js/stores/get-store.js"),m=n("./runtime-repl/environment/sidebar/EnvironmentSidebarContainer/EnvironmentSidebarContainer.js"),c=n("./runtime-repl/_common/components/molecule.js"),h=n("./runtime-repl/environment/sidebar/EnvironmentSidebarModel.js");let u=Object(l.observer)(s=class extends i.Component{render(){const{controller:t}=this.props,{isConsistentlyOffline:n}=Object(d.getStore)("SyncStatusStore");return n&&e.get(t,"model.isLoading")?o.a.createElement(c.SidebarOfflineState,null):o.a.createElement(m.default,{model:t.model})}})||s;u.propTypes={controller:a.a.shape({model:a.a.instanceOf(h.default)}).isRequired}}.call(this,n("./node_modules/lodash/lodash.js"))},"./runtime-repl/globals/sidebar/GlobalsSidebarListItem/GlobalsSidebarListItem.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var s,i=n("../../node_modules/react/index.js"),o=n.n(i),r=n("../../node_modules/mobx-react/dist/mobx-react.module.js"),a=n("./node_modules/classnames/index.js"),l=n.n(a),d=n("./node_modules/prop-types/index.js"),m=n.n(d),c=n("./js/containers/apps/requester/sidebar/SidebarListItem.js"),h=n("./runtime-repl/environment/sidebar/EnvironmentSidebarModel.js");let u=Object(r.observer)(s=class extends i.Component{constructor(e){super(e),this.handleSelect=this.handleSelect.bind(this)}getItemClasses(){return l()({"globals-sidebar-list-item":!0,selected:this.props.model.isActive})}handleSelect(){this.props.model.openInTab()}render(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.default,{text:"全局",isSelected:this.props.model.isActive,onClick:this.handleSelect}),o.a.createElement("div",{className:"globals-separator"}))}})||s;u.propTypes={model:m.a.instanceOf(h.GlobalsModel).isRequired}}}]);