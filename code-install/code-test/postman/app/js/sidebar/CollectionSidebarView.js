(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{"./runtime-repl/_common/components/SidebarErrorState/SidebarErrorState.js":function(e,t,o){"use strict";o.r(t),function(e){o.d(t,"default",(function(){return d}));var s,n=o("../../node_modules/react/index.js"),r=o.n(n),i=o("./node_modules/prop-types/index.js"),a=o.n(i),l=o("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=o("./js/components/base/Buttons.js");let d=Object(l.observer)(s=class extends n.Component{constructor(e){super(e),this.renderButton=this.renderButton.bind(this)}renderButton(){if(this.props.buttonText)return r.a.createElement(c.Button,{type:"secondary",onClick:this.props.handler},this.props.buttonText)}render(){return r.a.createElement("div",{className:"sidebar-error-wrapper"},r.a.createElement("div",{className:"sidebar-error-thumbnail"}),r.a.createElement("div",{className:"sidebar-error-content-container"},r.a.createElement("div",{className:"sidebar-error-header"},this.props.title),r.a.createElement("div",{className:"sidebar-error-content"},this.props.description),this.renderButton()))}})||s;d.defaultProps={description:null,buttonText:null,handler:e.noop},d.propTypes={title:a.a.string.isRequired,description:a.a.string,buttonText:a.a.string,handler:a.a.func}}.call(this,o("./node_modules/lodash/lodash.js"))},"./runtime-repl/collection/sidebar/CollectionSidebarMenu/CollectionSidebarMenu.js":function(e,t,o){"use strict";o.r(t),function(e){o.d(t,"default",(function(){return C}));var s,n=o("../../node_modules/react/index.js"),r=o.n(n),i=o("./node_modules/prop-types/index.js"),a=o.n(i),l=o("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=o("./js/components/base/Buttons.js"),d=o("./js/stores/get-store.js"),u=o("./js/services/NavigationService.js"),p=o("./js/containers/apps/requester/sidebar/SidebarListActions.js"),m=o("./js/components/base/Dropdowns.js"),h=o("./collaboration/workspace/types/PermissionTypes.ts"),b=o("./runtime-repl/_common/WorkspaceHelpers.js"),S=o("./runtime-repl/collection/sidebar/CollectionSidebarModel.js"),f=o("./runtime-repl/collection/_api/CollectionInterface.js"),j=o("./runtime-repl/_common/DisabledTooltipConstants.js");let C=Object(l.observer)(s=class extends n.Component{constructor(e){super(e),this.state={isCollectionCreateEnabled:!0},this.handleNewCollectionClick=this.handleNewCollectionClick.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}handleNewCollectionClick(){this.setState({isCollectionCreateEnabled:!1}),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.setState({isCollectionCreateEnabled:!0})}),1e3),Object(f.createCollection)()}handleTrashOpen(){if(!Object(b.isWorkspaceMember)()){if(Object(b.canJoinWorkspace)())return pm.mediator.trigger("openUnjoinedWorkspaceModal");if(!Object(b.isLoggedIn)())return pm.mediator.trigger("showSignInModal",{type:"trash",origin:"open_trash"})}u.default.transitionTo("trash")}handleSearchChange(e){this.props.model&&this.props.model.setSearchQuery(e)}render(){const t=Object(d.getStore)("ActiveWorkspacePermissionStore"),o=t&&t.permissions,s=e.get(o,h.WORKSPACE_PERMISSIONS.ADD_COLLECTION_TO_WORKSPACE,!0),{userCanSave:n}=Object(d.getStore)("OnlineStatusStore"),i=n&&s&&this.state.isCollectionCreateEnabled,a=!Object(d.getStore)("SyncStatusStore").isSocketConnected,l=Object(b.isLoggedIn)()&&!(Object(b.isWorkspaceMember)()||Object(b.canJoinWorkspace)())||a;let u=l?"只有此工作区的成员才能恢复已删除的集合":"恢复已删除的集合";return u=a?"重新联网后即可执行此操作":u,r.a.createElement("div",{className:"collection-sidebar-menu"},r.a.createElement(p.default,{createNewConfig:{tooltip:n?s?"创建新的集合":j.DISABLED_TOOLTIP_NO_PERMISSION:j.DISABLED_TOOLTIP_IS_OFFLINE,disabled:!i,onCreate:this.handleNewCollectionClick,xPathIdentifier:"addCollection"},onSearch:this.handleSearchChange,searchQuery:e.get(this.props.model,"searchQuery"),moreActions:r.a.createElement(m.DropdownMenu,null,r.a.createElement(m.MenuItem,null,r.a.createElement(c.Button,{onClick:this.handleTrashOpen,tooltip:u,disabled:l,type:"text",className:"collection-sidebar-menu__actions-trash"},"打开回收站")))}))}})||s;C.propTypes={model:a.a.instanceOf(S.default).isRequired}}.call(this,o("./node_modules/lodash/lodash.js"))},"./runtime-repl/collection/sidebar/CollectionSidebarView.js":function(e,t,o){"use strict";o.r(t),function(e){o.d(t,"default",(function(){return j}));var s,n=o("../../node_modules/react/index.js"),r=o.n(n),i=o("./node_modules/prop-types/index.js"),a=o.n(i),l=o("../../node_modules/mobx-react/dist/mobx-react.module.js"),c=o("./js/components/base/XPaths/XPath.js"),d=o("./js/stores/get-store.js"),u=o("./runtime-repl/collection/sidebar/CollectionSidebarModel.js"),p=o("./appsdk/sidebar/SidebarLoadingState/SidebarLoadingState.js"),m=o("./runtime-repl/collection/sidebar/CollectionSidebarListContainer/CollectionSidebarListContainer.js"),h=o("./runtime-repl/collection/sidebar/CollectionSidebarMenu/CollectionSidebarMenu.js"),b=o("./runtime-repl/_common/WorkbenchStatusConstants.js"),S=o("./runtime-repl/_common/components/SidebarErrorState/SidebarErrorState.js"),f=o("./runtime-repl/_common/components/molecule.js");let j=Object(l.observer)(s=class extends n.Component{constructor(e){super(e),this.focus=this.focus.bind(this),this.focusCollection=this.focusCollection.bind(this),this.focusNext=this.focusNext.bind(this),this.listRef=null}getView(){const{model:e,status:t}=this.props.controller||{},{isConsistentlyOffline:o}=Object(d.getStore)("SyncStatusStore");return o&&t===b.LOADING?r.a.createElement(f.SidebarOfflineState,null):t===b.ERROR?r.a.createElement(S.default,{title:"无法加载集合",description:"尝试刷新此页面或过一段时间再检查"}):t===b.READY?r.a.createElement(c.default,{identifier:"collection"},r.a.createElement(m.default,{ref:e=>{this.listRef=e},model:e})):r.a.createElement(p.default,{hasIcon:!0})}focus(){e.invoke(this,"listRef.__wrappedInstance.focus")}focusCollection(t,o){e.invoke(this,"listRef.__wrappedInstance.focusCollection",t,o)}focusNext(){const t=e.head(e.get(this.props.controller,"model.collections"));e.invoke(this,"listRef.handleSelect",t.id)}render(){const{model:e}=this.props.controller||{};return r.a.createElement("div",{className:"collection-sidebar"},r.a.createElement("div",{className:"collection-sidebar-wrapper"},r.a.createElement(h.default,{model:e}),this.getView()))}})||s;j.propTypes={controller:a.a.shape({model:a.a.instanceOf(u.default),status:a.a.oneOf([b.ERROR,b.READY,b.LOADING])}).isRequired}}.call(this,o("./node_modules/lodash/lodash.js"))}}]);